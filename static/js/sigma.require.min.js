'use strict';(function(d){var b={},e=function(a){var c;e.classes.dispatcher.extend(this);var h=this;a=a||{};"string"===typeof a||a instanceof HTMLElement?a={renderers:[a]}:"[object Array]"===Object.prototype.toString.call(a)&&(a={renderers:a});var f=a.renderers||a.renderer||a.container;if(!a.renderers||0===a.renderers.length)if("string"===typeof f||f instanceof HTMLElement||"object"===typeof f&&"container"in f)a.renderers=[f];if(a.id){if(b[a.id])throw'sigma: Instance "'+a.id+'" already exists.';Object.defineProperty(this,
"id",{value:a.id})}else{for(f=0;b[f];)f++;Object.defineProperty(this,"id",{value:""+f})}b[this.id]=this;this.settings=new e.classes.configurable(e.settings,a.settings||{});Object.defineProperty(this,"graph",{value:new e.classes.graph(this.settings),configurable:!0});Object.defineProperty(this,"middlewares",{value:[],configurable:!0});Object.defineProperty(this,"cameras",{value:{},configurable:!0});Object.defineProperty(this,"renderers",{value:{},configurable:!0});Object.defineProperty(this,"renderersPerCamera",
{value:{},configurable:!0});Object.defineProperty(this,"cameraFrames",{value:{},configurable:!0});Object.defineProperty(this,"camera",{get:function(){return this.cameras[0]}});Object.defineProperty(this,"events",{value:"click rightClick clickStage doubleClickStage rightClickStage clickNode clickNodes doubleClickNode doubleClickNodes rightClickNode rightClickNodes overNode overNodes outNode outNodes downNode downNodes upNode upNodes".split(" "),configurable:!0});this._handler=function(a){var c,b={};
for(c in a.data)b[c]=a.data[c];b.renderer=a.target;this.dispatchEvent(a.type,b)}.bind(this);var d=a.renderers||[];f=0;for(c=d.length;f<c;f++)this.addRenderer(d[f]);d=a.middlewares||[];f=0;for(c=d.length;f<c;f++)this.middlewares.push("string"===typeof d[f]?e.middlewares[d[f]]:d[f]);"object"===typeof a.graph&&a.graph&&(this.graph.read(a.graph),this.refresh());window.addEventListener("resize",function(){h.settings&&h.refresh()})};e.prototype.addCamera=function(a){var c=this;if(!arguments.length){for(a=
0;this.cameras[""+a];)a++;a=""+a}if(this.cameras[a])throw'sigma.addCamera: The camera "'+a+'" already exists.';var b=new e.classes.camera(a,this.graph,this.settings);this.cameras[a]=b;b.quadtree=new e.classes.quad;e.classes.edgequad!==d&&(b.edgequadtree=new e.classes.edgequad);b.bind("coordinatesUpdated",function(a){c.renderCamera(b,b.isAnimated)});this.renderersPerCamera[a]=[];return b};e.prototype.killCamera=function(a){a="string"===typeof a?this.cameras[a]:a;if(!a)throw"sigma.killCamera: The camera is undefined.";
var c,b=this.renderersPerCamera[a.id];for(c=b.length-1;0<=c;c--)this.killRenderer(b[c]);delete this.renderersPerCamera[a.id];delete this.cameraFrames[a.id];delete this.cameras[a.id];a.kill&&a.kill();return this};e.prototype.addRenderer=function(a){var c=a||{};"string"===typeof c?c={container:document.getElementById(c)}:c instanceof HTMLElement&&(c={container:c});"string"===typeof c.container&&(c.container=document.getElementById(c.container));if("id"in c)a=c.id;else{for(a=0;this.renderers[""+a];)a++;
a=""+a}if(this.renderers[a])throw'sigma.addRenderer: The renderer "'+a+'" already exists.';var b=(b="function"===typeof c.type?c.type:e.renderers[c.type])||e.renderers.def;var f="camera"in c?c.camera instanceof e.classes.camera?c.camera:this.cameras[c.camera]||this.addCamera(c.camera):this.addCamera();if(this.cameras[f.id]!==f)throw"sigma.addRenderer: The camera is not properly referenced.";b=new b(this.graph,f,this.settings,c);this.renderers[a]=b;Object.defineProperty(b,"id",{value:a});b.bind&&b.bind("click rightClick clickStage doubleClickStage rightClickStage clickNode clickNodes clickEdge clickEdges doubleClickNode doubleClickNodes doubleClickEdge doubleClickEdges rightClickNode rightClickNodes rightClickEdge rightClickEdges overNode overNodes overEdge overEdges outNode outNodes outEdge outEdges downNode downNodes downEdge downEdges upNode upNodes upEdge upEdges".split(" "),
this._handler);this.renderersPerCamera[f.id].push(b);return b};e.prototype.killRenderer=function(a){a="string"===typeof a?this.renderers[a]:a;if(!a)throw"sigma.killRenderer: The renderer is undefined.";var c=this.renderersPerCamera[a.camera.id],b=c.indexOf(a);0<=b&&c.splice(b,1);a.kill&&a.kill();delete this.renderers[a.id];return this};e.prototype.refresh=function(a){var c,b,f=0;a=a||{};var m=this.middlewares||[];var k=0;for(c=m.length;k<c;k++)m[k].call(this,0===k?"":"tmp"+f+":",k===c-1?"ready:":
"tmp"+ ++f+":");for(b in this.cameras)k=this.cameras[b],k.settings("autoRescale")&&this.renderersPerCamera[k.id]&&this.renderersPerCamera[k.id].length?e.middlewares.rescale.call(this,m.length?"ready:":"",k.readPrefix,{width:this.renderersPerCamera[k.id][0].width,height:this.renderersPerCamera[k.id][0].height}):e.middlewares.copy.call(this,m.length?"ready:":"",k.readPrefix),a.skipIndexation||(c=e.utils.getBoundaries(this.graph,k.readPrefix),k.quadtree.index(this.graph.nodes(),{prefix:k.readPrefix,
bounds:{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}),k.edgequadtree!==d&&k.settings("drawEdges")&&k.settings("enableEdgeHovering")&&k.edgequadtree.index(this.graph,{prefix:k.readPrefix,bounds:{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}));m=Object.keys(this.renderers);k=0;for(c=m.length;k<c;k++)if(this.renderers[m[k]].process)if(this.settings("skipErrors"))try{this.renderers[m[k]].process()}catch(g){console.log('Warning: The renderer "'+m[k]+'" crashed on ".process()"')}else this.renderers[m[k]].process();
this.render();return this};e.prototype.render=function(){var a;var c=Object.keys(this.renderers);var b=0;for(a=c.length;b<a;b++)if(this.settings("skipErrors"))try{this.renderers[c[b]].render()}catch(f){this.settings("verbose")&&console.log('Warning: The renderer "'+c[b]+'" crashed on ".render()"')}else this.renderers[c[b]].render();return this};e.prototype.renderCamera=function(a,c){var b,f=this;if(c){var d=this.renderersPerCamera[a.id];c=0;for(b=d.length;c<b;c++)if(this.settings("skipErrors"))try{d[c].render()}catch(k){this.settings("verbose")&&
console.log('Warning: The renderer "'+d[c].id+'" crashed on ".render()"')}else d[c].render()}else if(!this.cameraFrames[a.id]){d=this.renderersPerCamera[a.id];c=0;for(b=d.length;c<b;c++)if(this.settings("skipErrors"))try{d[c].render()}catch(k){this.settings("verbose")&&console.log('Warning: The renderer "'+d[c].id+'" crashed on ".render()"')}else d[c].render();this.cameraFrames[a.id]=requestAnimationFrame(function(){delete f.cameraFrames[a.id]})}return this};e.prototype.kill=function(){var a;this.dispatchEvent("kill");
this.graph.kill();delete this.middlewares;for(a in this.renderers)this.killRenderer(this.renderers[a]);for(a in this.cameras)this.killCamera(this.cameras[a]);delete this.renderers;delete this.cameras;for(a in this)this.hasOwnProperty(a)&&delete this[a];delete b[this.id]};e.instances=function(a){return arguments.length?b[a]:e.utils.extend({},b)};e.version="1.2.1";if("undefined"!==typeof this.sigma)throw"An object called sigma is already in the global scope.";this.sigma=e}).call(this);
(function(d){function b(a,c){var g;if(arguments.length)if(1===arguments.length&&Object(arguments[0])===arguments[0])for(a in arguments[0])b(a,arguments[0][a]);else if(1<arguments.length){var f=Array.isArray(a)?a:a.split(/ /);var d=0;for(g=f.length;d!==g;d+=1){var e=f[d];z[e]||(z[e]=[]);z[e].push({handler:c})}}}function e(a,c){var g,b,f=Array.isArray(a)?a:a.split(/ /);c=void 0===c?{}:c;a=0;for(g=f.length;a!==g;a+=1){var d=f[a];if(z[d]){var e={type:d,data:c||{}};var n=0;for(b=z[d].length;n!==b;n+=1)try{z[d][n].handler(e)}catch(I){}}}}
function a(a){var c=v.length;u[a.id]=a;a.status="running";c&&(a.weightTime=v[c-1].weightTime,a.currentTime=a.weightTime*(a.weight||1));a.startTime=n();e("jobStarted",g(a));v.push(a)}function c(){var g;for(g in t){var b=t[g];b.after?r[g]=b:a(b);delete t[g]}for(p=!!v.length;v.length&&n()-q<x.frameDuration;){b=!1;var d=n();var l=v.shift();var h=l.job();d=n()-d;l.done++;l.time+=d;l.currentTime+=d;l.weightTime=l.currentTime/(l.weight||1);l.averageTime=l.time/l.done;h=l.count?l.count<=l.done:!h;if(!h){var m=
0;for(d=v.length;m<d;m++)if(v[m].weightTime>l.weightTime){v.splice(m,0,l);b=!0;break}b||v.push(l)}if(b=h?l:null)for(g in f(b.id),r)r[g].after===b.id&&(a(r[g]),delete r[g])}p?(q=n(),e("enterFrame"),setTimeout(c,0)):e("stop")}function h(a,b){var f;if(Array.isArray(a)){y=!0;var d=0;for(f=a.length;d<f;d++)h(a[d].id,k(a[d],b));y=!1;p||(q=n(),e("start"),c())}else if("object"===typeof a)if("string"===typeof a.id)h(a.id,a);else{y=!0;for(d in a)"function"===typeof a[d]?h(d,k({job:a[d]},b)):h(d,k(a[d],b));
y=!1;p||(q=n(),e("start"),c())}else if("string"===typeof a){if(m(a))throw Error('[conrad.addJob] Job with id "'+a+'" already exists.');if("function"===typeof b)b={id:a,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0,job:b};else if("object"===typeof b)b=k({id:a,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0},b);else throw Error("[conrad.addJob] Wrong arguments.");t[a]=b;e("jobAdded",g(b));p||y||(q=n(),e("start"),c())}else throw Error("[conrad.addJob] Wrong arguments.");
return this}function f(a){var c;var b=!1;if(Array.isArray(a)){var d=0;for(c=a.length;d<c;d++)f(a[d])}else if("string"===typeof a){var l=[u,r,t];d=0;for(c=l.length;d<c;d++)a in l[d]&&(b=l[d][a],x.history&&(b.status="done",w.push(b)),e("jobEnded",g(b)),delete l[d][a],"function"===typeof b.end&&b.end(),b=!0);l=v;d=0;for(c=l.length;d<c;d++)if(l[d].id===a){l.splice(d,1);break}if(!b)throw Error('[conrad.killJob] Job "'+a+'" not found.');}else throw Error("[conrad.killJob] Wrong arguments.");return this}
function m(a){return(a=t[a]||u[a]||r[a])?k(a):null}function k(){var a,c,g={};for(a=arguments.length-1;0<=a;a--)for(c in arguments[a])g[c]=arguments[a][c];return g}function g(a){var c;if(!a)return a;if(Array.isArray(a)){var b=[];var d=0;for(c=a.length;d<c;d++)b.push(g(a[d]))}else if("object"===typeof a)for(d in b={},a)b[d]=g(a[d]);else b=a;return b}function l(a){var c,g=[];for(c in a)g.push(a[c]);return g}function n(){return Date.now?Date.now():(new Date).getTime()}if(d.conrad)throw Error("conrad already exists");
var q,p=!1,t={},u={},v=[],r={},w=[],y=!1,x={frameDuration:20,history:!0},z=Object.create(null);Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});var B={hasJob:m,addJob:h,killJob:f,killAll:function(){var a,c=k(t,u,r);if(x.history)for(a in c)c[a].status="done",w.push(c[a]),"function"===typeof c[a].end&&c[a].end();t={};r={};u={};v=[];p=!1;return this},settings:function(a,c){if("string"===typeof a1&&1===arguments.length)return x[a1];var g="object"===
typeof a1&&1===arguments.length?a1||{}:{};"string"===typeof a1&&(g[a1]=a2);for(var b in g)void 0!==g[b]?x[b]=g[b]:delete x[b];return this},getStats:function(a,c){var b;if(!arguments.length){var d=[];for(h in t)d.push(t[h]);for(h in r)d.push(r[h]);for(h in u)d.push(u[h]);d=d.concat(w)}if("string"===typeof a)switch(a){case "waiting":d=l(r);break;case "running":d=l(u);break;case "done":d=w;break;default:var f=a}a instanceof RegExp&&(f=a);!f&&("string"===typeof c||c instanceof RegExp)&&(f=c);if(f){var e=
"string"===typeof f;if(d instanceof Array)var n=d;else if("object"===typeof d)for(h in n=[],d)n=n.concat(d[h]);else{n=[];for(h in t)n.push(t[h]);for(h in r)n.push(r[h]);for(h in u)n.push(u[h]);n=n.concat(w)}d=[];var h=0;for(b=n.length;h<b;h++)(e?n[h].id===f:n[h].id.match(f))&&d.push(n[h])}return g(d)},isRunning:function(){return p},clearHistory:function(){w=[];return this},bind:b,unbind:function(a,c){var g,b,d=Array.isArray(a)?a:a.split(/ /);if(arguments.length)if(c){var f=0;for(g=d.length;f!==g;f+=
1){var e=d[f];if(z[e]){var l=[];var n=0;for(b=z[e].length;n!==b;n+=1)z[e][n].handler!==c&&l.push(z[e][n]);z[e]=l}z[e]&&0===z[e].length&&delete z[e]}}else for(f=0,g=d.length;f!==g;f+=1)delete z[d[f]];else z=Object.create(null)},version:"0.1.0"};"undefined"!==typeof exports&&("undefined"!==typeof module&&module.exports&&(exports=module.exports=B),exports.conrad=B);d.conrad=B})(this);var sigma=this.sigma,conrad=this.conrad;sigma.conrad=conrad;"undefined"===typeof HTMLElement&&(HTMLElement=function(){});
"undefined"===typeof window&&(window={addEventListener:function(){}});"undefined"!==typeof exports&&("undefined"!==typeof module&&module.exports&&(exports=module.exports=sigma),exports.sigma=sigma);
(function(d){if("undefined"===typeof sigma)throw"sigma is not declared";var b=this;sigma.utils=sigma.utils||{};sigma.utils.extend=function(){var a,c,b={};for(a=arguments.length-1;0<=a;a--)for(c in arguments[a])b[c]=arguments[a][c];return b};sigma.utils.dateNow=function(){return Date.now?Date.now():(new Date).getTime()};sigma.utils.pkg=function(a){return(a||"").split(".").reduce(function(a,b){return b in a?a[b]:a[b]={}},b)};sigma.utils.id=function(){var a=0;return function(){return++a}}();var e={};
sigma.utils.floatColor=function(a){if(e[a])return e[a];var c=a,b=0,d=0,m=0;"#"===a[0]?(a=a.slice(1),3===a.length?(b=parseInt(a.charAt(0)+a.charAt(0),16),d=parseInt(a.charAt(1)+a.charAt(1),16),m=parseInt(a.charAt(2)+a.charAt(2),16)):(b=parseInt(a.charAt(0)+a.charAt(1),16),d=parseInt(a.charAt(2)+a.charAt(3),16),m=parseInt(a.charAt(4)+a.charAt(5),16))):a.match(/^ *rgba? *\(/)&&(a=a.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/),b=+a[1],d=+a[2],m=+a[3]);a=65536*b+256*d+m;return e[c]=
a};sigma.utils.zoomTo=function(a,c,b,d,e){var f=a.settings;f=Math.max(f("zoomMin"),Math.min(f("zoomMax"),a.ratio*d));if(f!==a.ratio)if(d=f/a.ratio,b={x:c*(1-d)+a.x,y:b*(1-d)+a.y,ratio:f},e&&e.duration)c=sigma.misc.animation.killAll(a),e=sigma.utils.extend(e,{easing:c?"quadraticOut":"quadraticInOut"}),sigma.misc.animation.camera(a,b,e);else if(a.goTo(b),e&&e.onComplete)e.onComplete()};sigma.utils.getQuadraticControlPoint=function(a,c,b,d){return{x:(a+b)/2+(d-c)/4,y:(c+d)/2+(a-b)/4}};sigma.utils.getPointOnQuadraticCurve=
function(a,c,b,d,e,k,g){return{x:Math.pow(1-a,2)*c+2*(1-a)*a*k+Math.pow(a,2)*d,y:Math.pow(1-a,2)*b+2*(1-a)*a*g+Math.pow(a,2)*e}};sigma.utils.getPointOnBezierCurve=function(a,c,b,d,e,k,g,l,n){var f=Math.pow(1-a,3),h=3*a*Math.pow(1-a,2),m=3*Math.pow(a,2)*(1-a);a=Math.pow(a,3);return{x:f*c+h*k+m*l+a*d,y:f*b+h*g+m*n+a*e}};sigma.utils.getSelfLoopControlPoints=function(a,c,b){return{x1:a-7*b,y1:c,x2:a,y2:c+7*b}};sigma.utils.getDistance=function(a,c,b,d){return Math.sqrt(Math.pow(b-a,2)+Math.pow(d-c,2))};
sigma.utils.getCircleIntersection=function(a,c,b,d,e,k){d-=a;var g=e-c;e=Math.sqrt(g*g+d*d);if(e>b+k||e<Math.abs(b-k))return!1;k=(b*b-k*k+e*e)/(2*e);a+=d*k/e;c+=g*k/e;b=Math.sqrt(b*b-k*k);g=b/e*-g;d*=b/e;return{xi:a+g,xi_prime:a-g,yi:c+d,yi_prime:c-d}};sigma.utils.isPointOnSegment=function(a,c,b,d,e,k,g){var f=Math.abs((c-d)*(e-b)-(a-b)*(k-d)),n=sigma.utils.getDistance(b,d,e,k);return f/n<g&&Math.min(b,e)<=a&&a<=Math.max(b,e)&&Math.min(d,k)<=c&&c<=Math.max(d,k)};sigma.utils.isPointOnQuadraticCurve=
function(a,c,b,d,e,k,g,l,n){var f=sigma.utils.getDistance(b,d,e,k);if(Math.abs(a-b)>f||Math.abs(c-d)>f)return!1;var h=sigma.utils.getDistance(a,c,b,d),m=sigma.utils.getDistance(a,c,e,k);f=.5;h=h<m?-.01:.01;m=100;var u=sigma.utils.getPointOnQuadraticCurve(f,b,d,e,k,g,l);u=sigma.utils.getDistance(a,c,u.x,u.y);for(var v;0<m--&&0<=f&&1>=f&&u>n&&(.001<h||-.001>h);)v=u,u=sigma.utils.getPointOnQuadraticCurve(f,b,d,e,k,g,l),u=sigma.utils.getDistance(a,c,u.x,u.y),u>v?(h=-h/2,f+=h):0>f+h||1<f+h?(h/=2,u=v):
f+=h;return u<n};sigma.utils.isPointOnBezierCurve=function(a,c,b,d,e,k,g,l,n,q,p){var f=sigma.utils.getDistance(b,d,g,l);if(Math.abs(a-b)>f||Math.abs(c-d)>f)return!1;var h=sigma.utils.getDistance(a,c,b,d),m=sigma.utils.getDistance(a,c,e,k);f=.5;h=h<m?-.01:.01;m=100;var r=sigma.utils.getPointOnBezierCurve(f,b,d,e,k,g,l,n,q);r=sigma.utils.getDistance(a,c,r.x,r.y);for(var w;0<m--&&0<=f&&1>=f&&r>p&&(.001<h||-.001>h);)w=r,r=sigma.utils.getPointOnBezierCurve(f,b,d,e,k,g,l,n,q),r=sigma.utils.getDistance(a,
c,r.x,r.y),r>w?(h=-h/2,f+=h):0>f+h||1<f+h?(h/=2,r=w):f+=h;return r<p};sigma.utils.getX=function(a){return a.offsetX!==d&&a.offsetX||a.layerX!==d&&a.layerX||a.clientX!==d&&a.clientX};sigma.utils.getY=function(a){return a.offsetY!==d&&a.offsetY||a.layerY!==d&&a.layerY||a.clientY!==d&&a.clientY};sigma.utils.getPixelRatio=function(){var a=1;window.screen.deviceXDPI!==d&&window.screen.logicalXDPI!==d&&window.screen.deviceXDPI>window.screen.logicalXDPI?a=window.screen.systemXDPI/window.screen.logicalXDPI:
window.devicePixelRatio!==d&&(a=window.devicePixelRatio);return a};sigma.utils.getWidth=function(a){a=a.target.ownerSVGElement?a.target.ownerSVGElement.width:a.target.width;return"number"===typeof a&&a||a!==d&&a.baseVal!==d&&a.baseVal.value};sigma.utils.getCenter=function(a){var c=-1!==a.target.namespaceURI.indexOf("svg")?1:sigma.utils.getPixelRatio();return{x:sigma.utils.getWidth(a)/(2*c),y:sigma.utils.getHeight(a)/(2*c)}};sigma.utils.mouseCoords=function(a,c,b){c=c||sigma.utils.getX(a);b=b||sigma.utils.getY(a);
return{x:c-sigma.utils.getCenter(a).x,y:b-sigma.utils.getCenter(a).y,clientX:a.clientX,clientY:a.clientY,ctrlKey:a.ctrlKey,metaKey:a.metaKey,altKey:a.altKey,shiftKey:a.shiftKey}};sigma.utils.getHeight=function(a){a=a.target.ownerSVGElement?a.target.ownerSVGElement.height:a.target.height;return"number"===typeof a&&a||a!==d&&a.baseVal!==d&&a.baseVal.value};sigma.utils.getDelta=function(a){return a.wheelDelta!==d&&a.wheelDelta||a.detail!==d&&-a.detail};sigma.utils.getOffset=function(a){for(var c=0,b=
0;a;)b+=parseInt(a.offsetTop),c+=parseInt(a.offsetLeft),a=a.offsetParent;return{top:b,left:c}};sigma.utils.doubleClick=function(a,c,b){var d=0;a._doubleClickHandler=a._doubleClickHandler||{};a._doubleClickHandler[c]=a._doubleClickHandler[c]||[];var e=a._doubleClickHandler[c];e.push(function(a){d++;if(2===d)return d=0,b(a);1===d&&setTimeout(function(){d=0},sigma.settings.doubleClickTimeout)});a.addEventListener(c,e[e.length-1],!1)};sigma.utils.unbindDoubleClick=function(a,c){for(var b,d=(a._doubleClickHandler||
{})[c]||[];b=d.pop();)a.removeEventListener(c,b);delete (a._doubleClickHandler||{})[c]};sigma.utils.easings=sigma.utils.easings||{};sigma.utils.easings.linearNone=function(a){return a};sigma.utils.easings.quadraticIn=function(a){return a*a};sigma.utils.easings.quadraticOut=function(a){return a*(2-a)};sigma.utils.easings.quadraticInOut=function(a){return 1>(a*=2)?.5*a*a:-.5*(--a*(a-2)-1)};sigma.utils.easings.cubicIn=function(a){return a*a*a};sigma.utils.easings.cubicOut=function(a){return--a*a*a+1};
sigma.utils.easings.cubicInOut=function(a){return 1>(a*=2)?.5*a*a*a:.5*((a-=2)*a*a+2)};sigma.utils.loadShader=function(a,c,b,d){b=a.createShader(b);a.shaderSource(b,c);a.compileShader(b);return a.getShaderParameter(b,a.COMPILE_STATUS)?b:(d&&d('Error compiling shader "'+b+'":'+a.getShaderInfoLog(b)),a.deleteShader(b),null)};sigma.utils.loadProgram=function(a,c,b,d,e){var f=a.createProgram();for(d=0;d<c.length;++d)a.attachShader(f,c[d]);if(b)for(d=0;d<b.length;++d)a.bindAttribLocation(f,locations?locations[d]:
d,opt_attribs[d]);a.linkProgram(f);return a.getProgramParameter(f,a.LINK_STATUS)?f:(e&&e("Error in program linking: "+a.getProgramInfoLog(f)),a.deleteProgram(f),null)};sigma.utils.pkg("sigma.utils.matrices");sigma.utils.matrices.translation=function(a,c){return[1,0,0,0,1,0,a,c,1]};sigma.utils.matrices.rotation=function(a,c){var b=Math.cos(a);a=Math.sin(a);return c?[b,-a,a,b]:[b,-a,0,a,b,0,0,0,1]};sigma.utils.matrices.scale=function(a,c){return c?[a,0,0,a]:[a,0,0,0,a,0,0,0,1]};sigma.utils.matrices.multiply=
function(a,c,b){var d=b?2:3,e=a[0*d],h=a[0*d+1],g=a[0*d+2],l=a[1*d],n=a[1*d+1],q=a[1*d+2],p=a[2*d],t=a[2*d+1];a=a[2*d+2];var u=c[0*d],v=c[0*d+1],r=c[0*d+2],w=c[1*d],y=c[1*d+1],x=c[1*d+2],z=c[2*d],B=c[2*d+1];c=c[2*d+2];return b?[e*u+h*w,e*v+h*y,l*u+n*w,l*v+n*y]:[e*u+h*w+g*z,e*v+h*y+g*B,e*r+h*x+g*c,l*u+n*w+q*z,l*v+n*y+q*B,l*r+n*x+q*c,p*u+t*w+a*z,p*v+t*y+a*B,p*r+t*x+a*c]}}).call(this);
(function(d){var b,e=0,a=["ms","moz","webkit","o"];for(b=0;b<a.length&&!d.requestAnimationFrame;b++)d.requestAnimationFrame=d[a[b]+"RequestAnimationFrame"],d.cancelAnimationFrame=d[a[b]+"CancelAnimationFrame"]||d[a[b]+"CancelRequestAnimationFrame"];d.requestAnimationFrame||(d.requestAnimationFrame=function(a,b){var c=(new Date).getTime(),h=Math.max(0,16-(c-e));b=d.setTimeout(function(){a(c+h)},h);e=c+h;return b});d.cancelAnimationFrame||(d.cancelAnimationFrame=function(a){clearTimeout(a)});Function.prototype.bind||
(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var c=Array.prototype.slice.call(arguments,1),b=this;var d=function(){};var e=function(){return b.apply(this instanceof d&&a?this:a,c.concat(Array.prototype.slice.call(arguments)))};d.prototype=this.prototype;e.prototype=new d;return e})})(this);
(function(d){if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.settings");sigma.settings=sigma.utils.extend(sigma.settings||{},{clone:!0,immutable:!0,verbose:!1,classPrefix:"sigma",defaultNodeType:"def",defaultEdgeType:"def",defaultLabelColor:"#000",defaultEdgeColor:"#000",defaultNodeColor:"#000",defaultLabelSize:14,edgeColor:"source",minArrowSize:0,font:"arial",fontStyle:"",labelColor:"default",labelSize:"fixed",labelSizeRatio:1,labelThreshold:8,webglOversamplingRatio:2,
borderSize:0,defaultNodeBorderColor:"#000",hoverFont:"",singleHover:!0,hoverFontStyle:"",labelHoverShadow:"default",labelHoverShadowColor:"#000",nodeHoverColor:"node",defaultNodeHoverColor:"#000",labelHoverBGColor:"default",defaultHoverLabelBGColor:"#fff",labelHoverColor:"default",defaultLabelHoverColor:"#000",edgeHoverColor:"edge",edgeHoverSizeRatio:1,defaultEdgeHoverColor:"#000",edgeHoverExtremities:!1,drawEdges:!0,drawNodes:!0,drawLabels:!0,drawEdgeLabels:!1,batchEdgesDrawing:!1,hideEdgesOnMove:!1,
canvasEdgesBatchSize:500,webglEdgesBatchSize:1E3,scalingMode:"inside",sideMargin:0,minEdgeSize:.5,maxEdgeSize:1,minNodeSize:1,maxNodeSize:8,touchEnabled:!0,mouseEnabled:!0,mouseWheelEnabled:!0,doubleClickEnabled:!0,eventsEnabled:!0,zoomingRatio:1.7,doubleClickZoomingRatio:2.2,zoomMin:.0625,zoomMax:2,mouseZoomDuration:200,doubleClickZoomDuration:200,mouseInertiaDuration:200,mouseInertiaRatio:3,touchInertiaDuration:200,touchInertiaRatio:3,doubleClickTimeout:300,doubleTapTimeout:300,dragTimeout:200,
autoResize:!0,autoRescale:!0,enableCamera:!0,enableHovering:!0,enableEdgeHovering:!1,edgeHoverPrecision:5,rescaleIgnoreSize:!1,skipErrors:!1,nodesPowRatio:.5,edgesPowRatio:.5,animationsTime:200})}).call(this);
(function(){var d=function(){Object.defineProperty(this,"_handlers",{value:{}})};d.prototype.bind=function(b,d){var a,c;if(1===arguments.length&&"object"===typeof arguments[0])for(b in arguments[0])this.bind(b,arguments[0][b]);else if(2===arguments.length&&"function"===typeof arguments[1]){var e="string"===typeof b?b.split(" "):b;var f=0;for(a=e.length;f!==a;f+=1)if(c=e[f])this._handlers[c]||(this._handlers[c]=[]),this._handlers[c].push({handler:d})}else throw"bind: Wrong arguments.";return this};
d.prototype.unbind=function(b,d){var a,c,e="string"===typeof b?b.split(" "):b;if(!arguments.length){for(f in this._handlers)delete this._handlers[f];return this}if(d){var f=0;for(a=e.length;f!==a;f+=1){var m=e[f];if(this._handlers[m]){var k=[];var g=0;for(c=this._handlers[m].length;g!==c;g+=1)this._handlers[m][g].handler!==d&&k.push(this._handlers[m][g]);this._handlers[m]=k}this._handlers[m]&&0===this._handlers[m].length&&delete this._handlers[m]}}else for(f=0,a=e.length;f!==a;f+=1)delete this._handlers[e[f]];
return this};d.prototype.dispatchEvent=function(b,d){var a,c,e="string"===typeof b?b.split(" "):b;d=void 0===d?{}:d;b=0;for(a=e.length;b!==a;b+=1){var f=e[b];if(this._handlers[f]){var m=this.getEvent(f,d);var k=[];var g=0;for(c=this._handlers[f].length;g!==c;g+=1)this._handlers[f][g].handler(m),this._handlers[f][g].one||k.push(this._handlers[f][g]);this._handlers[f]=k}}return this};d.prototype.getEvent=function(b,d){return{type:b,data:d||{},target:this}};d.extend=function(b,e){for(var a in d.prototype)d.prototype.hasOwnProperty(a)&&
(b[a]=d.prototype[a]);d.apply(b,e)};"undefined"!==typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.dispatcher=d):"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=d),exports.dispatcher=d):this.dispatcher=d}).call(this);
(function(){var d=function(){var b,e={},a=Array.prototype.slice.call(arguments,0),c=function(b,d){var f;if(1===arguments.length&&"string"===typeof b){if(void 0!==e[b])return e[b];var g=0;for(f=a.length;g<f;g++)if(void 0!==a[g][b])return a[g][b]}else{if("object"===typeof b&&"string"===typeof d)return void 0!==(b||{})[d]?b[d]:c(d);var l="object"===typeof b&&void 0===d?b:{};"string"===typeof b&&(l[b]=d);g=0;var n=Object.keys(l);for(f=n.length;g<f;g++)e[n[g]]=l[n[g]];return this}};c.embedObjects=function(){var b=
a.concat(e).concat(Array.prototype.splice.call(arguments,0));return d.apply({},b)};var h=0;for(b=arguments.length;h<b;h++)c(arguments[h]);return c};"undefined"!==typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.configurable=d):"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=d),exports.configurable=d):this.configurable=d}).call(this);
(function(d){function b(a,b,c){return function(){var g;for(g in m[a])m[a][g].apply(b,arguments);var d=c.apply(b,arguments);for(g in f[a])f[a][g].apply(b,arguments);return d}}function e(a){for(var b in a)"hasOwnProperty"in a&&!a.hasOwnProperty(b)||delete a[b];return a}var a=Object.create(null),c=Object.create(null),h=Object.create(null),f=Object.create(null),m=Object.create(null),k={immutable:!0,clone:!0},g=function(a){return k[a]},l=function(c){var d;var e={settings:c||g,nodesArray:[],edgesArray:[],
nodesIndex:Object.create(null),edgesIndex:Object.create(null),inNeighborsIndex:Object.create(null),outNeighborsIndex:Object.create(null),allNeighborsIndex:Object.create(null),inNeighborsCount:Object.create(null),outNeighborsCount:Object.create(null),allNeighborsCount:Object.create(null)};for(d in h)h[d].call(e);for(d in a)c=b(d,e,a[d]),this[d]=c,e[d]=c};l.addMethod=function(b,c){if("string"!==typeof b||"function"!==typeof c||2!==arguments.length)throw"addMethod: Wrong arguments.";if(a[b]||l[b])throw'The method "'+
b+'" already exists.';a[b]=c;f[b]=Object.create(null);m[b]=Object.create(null);return this};l.hasMethod=function(b){return!(!a[b]&&!l[b])};l.attach=function(a,b,c,g){if("string"!==typeof a||"string"!==typeof b||"function"!==typeof c||3>arguments.length||4<arguments.length)throw"attach: Wrong arguments.";if("constructor"===a)var d=h;else if(g){if(!m[a])throw'The method "'+a+'" does not exist.';d=m[a]}else{if(!f[a])throw'The method "'+a+'" does not exist.';d=f[a]}if(d[b])throw'A function "'+b+'" is already attached to the method "'+
a+'".';d[b]=c;return this};l.attachBefore=function(a,b,c){return this.attach(a,b,c,!0)};l.addIndex=function(a,b){if("string"!==typeof a||Object(b)!==b||2!==arguments.length)throw"addIndex: Wrong arguments.";if(c[a])throw'The index "'+a+'" already exists.';var g;c[a]=b;for(g in b){if("function"!==typeof b[g])throw"The bindings must be functions.";l.attach(g,a,b[g])}return this};l.addMethod("addNode",function(a){if(Object(a)!==a||1!==arguments.length)throw"addNode: Wrong arguments.";if("string"!==typeof a.id&&
"number"!==typeof a.id)throw"The node must have a string or number id.";if(this.nodesIndex[a.id])throw'The node "'+a.id+'" already exists.';var b,c=a.id,g=Object.create(null);if(this.settings("clone"))for(b in a)"id"!==b&&(g[b]=a[b]);else g=a;this.settings("immutable")?Object.defineProperty(g,"id",{value:c,enumerable:!0}):g.id=c;this.inNeighborsIndex[c]=Object.create(null);this.outNeighborsIndex[c]=Object.create(null);this.allNeighborsIndex[c]=Object.create(null);this.inNeighborsCount[c]=0;this.outNeighborsCount[c]=
0;this.allNeighborsCount[c]=0;this.nodesArray.push(g);this.nodesIndex[g.id]=g;return this});l.addMethod("addEdge",function(a){if(Object(a)!==a||1!==arguments.length)throw"addEdge: Wrong arguments.";if("string"!==typeof a.id&&"number"!==typeof a.id)throw"The edge must have a string or number id.";if("string"!==typeof a.source&&"number"!==typeof a.source||!this.nodesIndex[a.source])throw"The edge source must have an existing node id.";if("string"!==typeof a.target&&"number"!==typeof a.target||!this.nodesIndex[a.target])throw"The edge target must have an existing node id.";
if(this.edgesIndex[a.id])throw'The edge "'+a.id+'" already exists.';var b,c=Object.create(null);if(this.settings("clone"))for(b in a)"id"!==b&&"source"!==b&&"target"!==b&&(c[b]=a[b]);else c=a;this.settings("immutable")?(Object.defineProperty(c,"id",{value:a.id,enumerable:!0}),Object.defineProperty(c,"source",{value:a.source,enumerable:!0}),Object.defineProperty(c,"target",{value:a.target,enumerable:!0})):(c.id=a.id,c.source=a.source,c.target=a.target);this.edgesArray.push(c);this.edgesIndex[c.id]=
c;this.inNeighborsIndex[c.target][c.source]||(this.inNeighborsIndex[c.target][c.source]=Object.create(null));this.inNeighborsIndex[c.target][c.source][c.id]=c;this.outNeighborsIndex[c.source][c.target]||(this.outNeighborsIndex[c.source][c.target]=Object.create(null));this.outNeighborsIndex[c.source][c.target][c.id]=c;this.allNeighborsIndex[c.source][c.target]||(this.allNeighborsIndex[c.source][c.target]=Object.create(null));this.allNeighborsIndex[c.source][c.target][c.id]=c;c.target!==c.source&&(this.allNeighborsIndex[c.target][c.source]||
(this.allNeighborsIndex[c.target][c.source]=Object.create(null)),this.allNeighborsIndex[c.target][c.source][c.id]=c);this.inNeighborsCount[c.target]++;this.outNeighborsCount[c.source]++;this.allNeighborsCount[c.target]++;this.allNeighborsCount[c.source]++;return this});l.addMethod("dropNode",function(a){if("string"!==typeof a&&"number"!==typeof a||1!==arguments.length)throw"dropNode: Wrong arguments.";if(!this.nodesIndex[a])throw'The node "'+a+'" does not exist.';var c,b;delete this.nodesIndex[a];
var g=0;for(b=this.nodesArray.length;g<b;g++)if(this.nodesArray[g].id===a){this.nodesArray.splice(g,1);break}for(g=this.edgesArray.length-1;0<=g;g--)this.edgesArray[g].source!==a&&this.edgesArray[g].target!==a||this.dropEdge(this.edgesArray[g].id);delete this.inNeighborsIndex[a];delete this.outNeighborsIndex[a];delete this.allNeighborsIndex[a];delete this.inNeighborsCount[a];delete this.outNeighborsCount[a];delete this.allNeighborsCount[a];for(c in this.nodesIndex)delete this.inNeighborsIndex[c][a],
delete this.outNeighborsIndex[c][a],delete this.allNeighborsIndex[c][a];return this});l.addMethod("dropEdge",function(a){if("string"!==typeof a&&"number"!==typeof a||1!==arguments.length)throw"dropEdge: Wrong arguments.";if(!this.edgesIndex[a])throw'The edge "'+a+'" does not exist.';var c;var b=this.edgesIndex[a];delete this.edgesIndex[a];var g=0;for(c=this.edgesArray.length;g<c;g++)if(this.edgesArray[g].id===a){this.edgesArray.splice(g,1);break}delete this.inNeighborsIndex[b.target][b.source][b.id];
Object.keys(this.inNeighborsIndex[b.target][b.source]).length||delete this.inNeighborsIndex[b.target][b.source];delete this.outNeighborsIndex[b.source][b.target][b.id];Object.keys(this.outNeighborsIndex[b.source][b.target]).length||delete this.outNeighborsIndex[b.source][b.target];delete this.allNeighborsIndex[b.source][b.target][b.id];Object.keys(this.allNeighborsIndex[b.source][b.target]).length||delete this.allNeighborsIndex[b.source][b.target];b.target!==b.source&&(delete this.allNeighborsIndex[b.target][b.source][b.id],
Object.keys(this.allNeighborsIndex[b.target][b.source]).length||delete this.allNeighborsIndex[b.target][b.source]);this.inNeighborsCount[b.target]--;this.outNeighborsCount[b.source]--;this.allNeighborsCount[b.source]--;this.allNeighborsCount[b.target]--;return this});l.addMethod("kill",function(){this.nodesArray.length=0;this.edgesArray.length=0;delete this.nodesArray;delete this.edgesArray;delete this.nodesIndex;delete this.edgesIndex;delete this.inNeighborsIndex;delete this.outNeighborsIndex;delete this.allNeighborsIndex;
delete this.inNeighborsCount;delete this.outNeighborsCount;delete this.allNeighborsCount});l.addMethod("clear",function(){this.nodesArray.length=0;this.edgesArray.length=0;e(this.nodesIndex);e(this.edgesIndex);e(this.nodesIndex);e(this.inNeighborsIndex);e(this.outNeighborsIndex);e(this.allNeighborsIndex);e(this.inNeighborsCount);e(this.outNeighborsCount);e(this.allNeighborsCount);return this});l.addMethod("read",function(a){var b;var c=a.nodes||[];var g=0;for(b=c.length;g<b;g++)this.addNode(c[g]);
c=a.edges||[];g=0;for(b=c.length;g<b;g++)this.addEdge(c[g]);return this});l.addMethod("nodes",function(a){if(!arguments.length)return this.nodesArray.slice(0);if(1===arguments.length&&("string"===typeof a||"number"===typeof a))return this.nodesIndex[a];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(a)){var b,c=[];var g=0;for(b=a.length;g<b;g++)if("string"===typeof a[g]||"number"===typeof a[g])c.push(this.nodesIndex[a[g]]);else throw"nodes: Wrong arguments.";return c}throw"nodes: Wrong arguments.";
});l.addMethod("degree",function(a,b){b={"in":this.inNeighborsCount,out:this.outNeighborsCount}[b||""]||this.allNeighborsCount;if("string"===typeof a||"number"===typeof a)return b[a];if("[object Array]"===Object.prototype.toString.call(a)){var c,g=[];var d=0;for(c=a.length;d<c;d++)if("string"===typeof a[d]||"number"===typeof a[d])g.push(b[a[d]]);else throw"degree: Wrong arguments.";return g}throw"degree: Wrong arguments.";});l.addMethod("edges",function(a){if(!arguments.length)return this.edgesArray.slice(0);
if(1===arguments.length&&("string"===typeof a||"number"===typeof a))return this.edgesIndex[a];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(a)){var b,c=[];var g=0;for(b=a.length;g<b;g++)if("string"===typeof a[g]||"number"===typeof a[g])c.push(this.edgesIndex[a[g]]);else throw"edges: Wrong arguments.";return c}throw"edges: Wrong arguments.";});"undefined"!==typeof sigma?(sigma.classes=sigma.classes||Object.create(null),sigma.classes.graph=l):"undefined"!==typeof exports?
("undefined"!==typeof module&&module.exports&&(exports=module.exports=l),exports.graph=l):this.graph=l}).call(this);
(function(d){if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.classes");sigma.classes.camera=function(b,d,a,c){sigma.classes.dispatcher.extend(this);Object.defineProperty(this,"graph",{value:d});Object.defineProperty(this,"id",{value:b});Object.defineProperty(this,"readPrefix",{value:"read_cam"+b+":"});Object.defineProperty(this,"prefix",{value:"cam"+b+":"});this.y=this.x=0;this.ratio=1;this.angle=0;this.isAnimated=!1;this.settings="object"===typeof c&&c?a.embedObject(c):
a};sigma.classes.camera.prototype.goTo=function(b){if(!this.settings("enableCamera"))return this;var e,a=b||{},c=["x","y","ratio","angle"];b=0;for(e=c.length;b<e;b++)if(a[c[b]]!==d){if("number"!==typeof a[c[b]]||isNaN(a[c[b]]))throw'Value for "'+c[b]+'" is not a number.';this[c[b]]=a[c[b]]}this.dispatchEvent("coordinatesUpdated");return this};sigma.classes.camera.prototype.applyView=function(b,e,a){a=a||{};e=e!==d?e:this.prefix;b=b!==d?b:this.readPrefix;var c=a.nodes||this.graph.nodes(),h=a.edges||
this.graph.edges(),f,m=Math.cos(this.angle)/this.ratio,k=Math.sin(this.angle)/this.ratio,g=Math.pow(this.ratio,this.settings("nodesPowRatio")),l=Math.pow(this.ratio,this.settings("edgesPowRatio")),n=(a.width||0)/2-this.x*m-this.y*k,q=(a.height||0)/2-this.y*m+this.x*k;a=0;for(f=c.length;a<f;a++){var p=c[a];p[e+"x"]=(p[b+"x"]||0)*m+(p[b+"y"]||0)*k+n;p[e+"y"]=(p[b+"y"]||0)*m-(p[b+"x"]||0)*k+q;p[e+"size"]=(p[b+"size"]||0)/g}a=0;for(f=h.length;a<f;a++)h[a][e+"size"]=(h[a][b+"size"]||0)/l;return this};
sigma.classes.camera.prototype.graphPosition=function(b,d,a){var c=0,e=0,f=Math.cos(this.angle),m=Math.sin(this.angle);a||(c=-(this.x*f+this.y*m)/this.ratio,e=-(this.y*f-this.x*m)/this.ratio);return{x:(b*f+d*m)/this.ratio+c,y:(d*f-b*m)/this.ratio+e}};sigma.classes.camera.prototype.cameraPosition=function(b,d,a){var c=0,e=0,f=Math.cos(this.angle),m=Math.sin(this.angle);a||(c=-(this.x*f+this.y*m)/this.ratio,e=-(this.y*f-this.x*m)/this.ratio);return{x:((b-c)*f-(d-e)*m)*this.ratio,y:((d-e)*f+(b-c)*m)*
this.ratio}};sigma.classes.camera.prototype.getMatrix=function(){var b=sigma.utils.matrices.scale(1/this.ratio),d=sigma.utils.matrices.rotation(this.angle),a=sigma.utils.matrices.translation(-this.x,-this.y);return sigma.utils.matrices.multiply(a,sigma.utils.matrices.multiply(d,b))};sigma.classes.camera.prototype.getRectangle=function(b,d){var a=this.cameraPosition(b,0,!0),c=this.cameraPosition(0,d,!0),e=this.cameraPosition(b/2,d/2,!0);b=this.cameraPosition(b/4,0,!0).x;d=this.cameraPosition(0,d/4,
!0).y;return{x1:this.x-e.x-b,y1:this.y-e.y-d,x2:this.x-e.x+b+a.x,y2:this.y-e.y-d+a.y,height:Math.sqrt(Math.pow(c.x,2)+Math.pow(c.y+2*d,2))}}}).call(this);
(function(d){function b(a,b){for(var c=[],g=0;4>g;g++)a.x2>=b[g][0].x&&a.x1<=b[g][1].x&&a.y1+a.height>=b[g][0].y&&a.y1<=b[g][2].y&&c.push(g);return c}function e(a,b){for(var c=[],g=0;4>g;g++)m.collision(a,b[g])&&c.push(g);return c}function a(c,e,h){if(h.level<h.maxLevel)for(var g=b(e,h.corners),l=0,k=g.length;l<k;l++){if(h.nodes[g[l]]===d){var m=h.nodes,n=g[l],r,w=r=void 0,y=h.level+1,x=Math.round(h.bounds.width/2),z=Math.round(h.bounds.height/2),B=Math.round(h.bounds.x),A=Math.round(h.bounds.y);
switch(g[l]){case 0:w=B;r=A;break;case 1:w=B+x;r=A;break;case 2:w=B;r=A+z;break;case 3:w=B+x,r=A+z}r=f({x:w,y:r,width:x,height:z},y,h.maxElements,h.maxLevel);m[n]=r}a(c,e,h.nodes[g[l]])}else h.elements.push(c)}function c(a,b){if(b.level<b.maxLevel){var g=b.bounds;var e=a.x<g.x+g.width/2;g=a.y<g.y+g.height/2?e?0:1:e?2:3;return b.nodes[g]!==d?c(a,b.nodes[g]):[]}return b.elements}function h(a,b,c,e){e=e||{};if(b.level<b.maxLevel)for(var g=c(a,b.corners),f=0,l=g.length;f<l;f++)b.nodes[g[f]]!==d&&h(a,
b.nodes[g[f]],c,e);else for(a=0,c=b.elements.length;a<c;a++)e[b.elements[a].id]===d&&(e[b.elements[a].id]=b.elements[a]);return e}function f(a,b,c,d){return{level:b||0,bounds:a,corners:m.splitSquare(a),maxElements:c||20,maxLevel:d||4,elements:[],nodes:[]}}var m={pointToSquare:function(a){return{x1:a.x-a.size,y1:a.y-a.size,x2:a.x+a.size,y2:a.y-a.size,height:2*a.size}},isAxisAligned:function(a){return a.x1===a.x2||a.y1===a.y2},axisAlignedTopPoints:function(a){return a.y1===a.y2&&a.x1<a.x2?a:a.x1===
a.x2&&a.y2>a.y1?{x1:a.x1-a.height,y1:a.y1,x2:a.x1,y2:a.y1,height:a.height}:a.x1===a.x2&&a.y2<a.y1?{x1:a.x1,y1:a.y2,x2:a.x2+a.height,y2:a.y2,height:a.height}:{x1:a.x2,y1:a.y1-a.height,x2:a.x1,y2:a.y1-a.height,height:a.height}},lowerLeftCoor:function(a){var b=Math.sqrt(Math.pow(a.x2-a.x1,2)+Math.pow(a.y2-a.y1,2));return{x:a.x1-(a.y2-a.y1)*a.height/b,y:a.y1+(a.x2-a.x1)*a.height/b}},lowerRightCoor:function(a,b){return{x:b.x-a.x1+a.x2,y:b.y-a.y1+a.y2}},rectangleCorners:function(a){var b=this.lowerLeftCoor(a),
c=this.lowerRightCoor(a,b);return[{x:a.x1,y:a.y1},{x:a.x2,y:a.y2},{x:b.x,y:b.y},{x:c.x,y:c.y}]},splitSquare:function(a){return[[{x:a.x,y:a.y},{x:a.x+a.width/2,y:a.y},{x:a.x,y:a.y+a.height/2},{x:a.x+a.width/2,y:a.y+a.height/2}],[{x:a.x+a.width/2,y:a.y},{x:a.x+a.width,y:a.y},{x:a.x+a.width/2,y:a.y+a.height/2},{x:a.x+a.width,y:a.y+a.height/2}],[{x:a.x,y:a.y+a.height/2},{x:a.x+a.width/2,y:a.y+a.height/2},{x:a.x,y:a.y+a.height},{x:a.x+a.width/2,y:a.y+a.height}],[{x:a.x+a.width/2,y:a.y+a.height/2},{x:a.x+
a.width,y:a.y+a.height/2},{x:a.x+a.width/2,y:a.y+a.height},{x:a.x+a.width,y:a.y+a.height}]]},axis:function(a,b){return[{x:a[1].x-a[0].x,y:a[1].y-a[0].y},{x:a[1].x-a[3].x,y:a[1].y-a[3].y},{x:b[0].x-b[2].x,y:b[0].y-b[2].y},{x:b[0].x-b[1].x,y:b[0].y-b[1].y}]},projection:function(a,b){a=(a.x*b.x+a.y*b.y)/(Math.pow(b.x,2)+Math.pow(b.y,2));return{x:a*b.x,y:a*b.y}},axisCollision:function(a,b,c){for(var d=[],g=[],e=0;4>e;e++){var f=this.projection(b[e],a),l=this.projection(c[e],a);d.push(f.x*a.x+f.y*a.y);
g.push(l.x*a.x+l.y*a.y)}a=Math.max.apply(Math,d);b=Math.max.apply(Math,g);d=Math.min.apply(Math,d);return Math.min.apply(Math,g)<=a&&b>=d},collision:function(a,b){for(var c=this.axis(a,b),d=!0,g=0;4>g;g++)d=d&&this.axisCollision(c[g],a,b);return d}},k=function(){this._geom=m;this._tree=null;this._cache={query:!1,result:!1}};k.prototype.index=function(b,c){if(!c.bounds)throw"sigma.classes.quad.index: bounds information not given.";var d=c.prefix||"";this._tree=f(c.bounds,0,c.maxElements,c.maxLevel);
c=0;for(var g=b.length;c<g;c++)a(b[c],m.pointToSquare({x:b[c][d+"x"],y:b[c][d+"y"],size:b[c][d+"size"]}),this._tree);this._cache={query:!1,result:!1};return this._tree};k.prototype.point=function(a,b){return this._tree?c({x:a,y:b},this._tree)||[]:[]};k.prototype.area=function(a){var c=JSON.stringify(a);if(this._cache.query===c)return this._cache.result;if(m.isAxisAligned(a)){var d=b;a=m.axisAlignedTopPoints(a)}else d=e,a=m.rectangleCorners(a);d=this._tree?h(a,this._tree,d):[];a=[];for(var g in d)a.push(d[g]);
this._cache.query=c;return this._cache.result=a};"undefined"!==typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.quad=k):"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=k),exports.quad=k):this.quad=k}).call(this);
(function(d){function b(a,b){for(var c=[],d=0;4>d;d++)a.x2>=b[d][0].x&&a.x1<=b[d][1].x&&a.y1+a.height>=b[d][0].y&&a.y1<=b[d][2].y&&c.push(d);return c}function e(a,b){for(var c=[],d=0;4>d;d++)m.collision(a,b[d])&&c.push(d);return c}function a(c,e,h){if(h.level<h.maxLevel)for(var g=b(e,h.corners),l=0,k=g.length;l<k;l++){if(h.nodes[g[l]]===d){var m=h.nodes,n=g[l],r,w=r=void 0,y=h.level+1,x=Math.round(h.bounds.width/2),z=Math.round(h.bounds.height/2),B=Math.round(h.bounds.x),A=Math.round(h.bounds.y);
switch(g[l]){case 0:w=B;r=A;break;case 1:w=B+x;r=A;break;case 2:w=B;r=A+z;break;case 3:w=B+x,r=A+z}r=f({x:w,y:r,width:x,height:z},y,h.maxElements,h.maxLevel);m[n]=r}a(c,e,h.nodes[g[l]])}else h.elements.push(c)}function c(a,b){if(b.level<b.maxLevel){var g=b.bounds;var e=a.x<g.x+g.width/2;g=a.y<g.y+g.height/2?e?0:1:e?2:3;return b.nodes[g]!==d?c(a,b.nodes[g]):[]}return b.elements}function h(a,b,c,e){e=e||{};if(b.level<b.maxLevel)for(var g=c(a,b.corners),f=0,l=g.length;f<l;f++)b.nodes[g[f]]!==d&&h(a,
b.nodes[g[f]],c,e);else for(a=0,c=b.elements.length;a<c;a++)e[b.elements[a].id]===d&&(e[b.elements[a].id]=b.elements[a]);return e}function f(a,b,c,d){return{level:b||0,bounds:a,corners:m.splitSquare(a),maxElements:c||40,maxLevel:d||8,elements:[],nodes:[]}}var m={pointToSquare:function(a){return{x1:a.x-a.size,y1:a.y-a.size,x2:a.x+a.size,y2:a.y-a.size,height:2*a.size}},lineToSquare:function(a){return a.y1<a.y2?a.x1<a.x2?{x1:a.x1-a.size,y1:a.y1-a.size,x2:a.x2+a.size,y2:a.y1-a.size,height:a.y2-a.y1+2*
a.size}:{x1:a.x2-a.size,y1:a.y1-a.size,x2:a.x1+a.size,y2:a.y1-a.size,height:a.y2-a.y1+2*a.size}:a.x1<a.x2?{x1:a.x1-a.size,y1:a.y2-a.size,x2:a.x2+a.size,y2:a.y2-a.size,height:a.y1-a.y2+2*a.size}:{x1:a.x2-a.size,y1:a.y2-a.size,x2:a.x1+a.size,y2:a.y2-a.size,height:a.y1-a.y2+2*a.size}},quadraticCurveToSquare:function(a,b){b=sigma.utils.getPointOnQuadraticCurve(.5,a.x1,a.y1,a.x2,a.y2,b.x,b.y);var c=Math.min(a.y1,a.y2,b.y);return{x1:Math.min(a.x1,a.x2,b.x)-a.size,y1:c-a.size,x2:Math.max(a.x1,a.x2,b.x)+
a.size,y2:c-a.size,height:Math.max(a.y1,a.y2,b.y)-c+2*a.size}},selfLoopToSquare:function(a){var b=sigma.utils.getSelfLoopControlPoints(a.x,a.y,a.size),c=Math.min(a.y,b.y1,b.y2);return{x1:Math.min(a.x,b.x1,b.x2)-a.size,y1:c-a.size,x2:Math.max(a.x,b.x1,b.x2)+a.size,y2:c-a.size,height:Math.max(a.y,b.y1,b.y2)-c+2*a.size}},isAxisAligned:function(a){return a.x1===a.x2||a.y1===a.y2},axisAlignedTopPoints:function(a){return a.y1===a.y2&&a.x1<a.x2?a:a.x1===a.x2&&a.y2>a.y1?{x1:a.x1-a.height,y1:a.y1,x2:a.x1,
y2:a.y1,height:a.height}:a.x1===a.x2&&a.y2<a.y1?{x1:a.x1,y1:a.y2,x2:a.x2+a.height,y2:a.y2,height:a.height}:{x1:a.x2,y1:a.y1-a.height,x2:a.x1,y2:a.y1-a.height,height:a.height}},lowerLeftCoor:function(a){var b=Math.sqrt(Math.pow(a.x2-a.x1,2)+Math.pow(a.y2-a.y1,2));return{x:a.x1-(a.y2-a.y1)*a.height/b,y:a.y1+(a.x2-a.x1)*a.height/b}},lowerRightCoor:function(a,b){return{x:b.x-a.x1+a.x2,y:b.y-a.y1+a.y2}},rectangleCorners:function(a){var b=this.lowerLeftCoor(a),c=this.lowerRightCoor(a,b);return[{x:a.x1,
y:a.y1},{x:a.x2,y:a.y2},{x:b.x,y:b.y},{x:c.x,y:c.y}]},splitSquare:function(a){return[[{x:a.x,y:a.y},{x:a.x+a.width/2,y:a.y},{x:a.x,y:a.y+a.height/2},{x:a.x+a.width/2,y:a.y+a.height/2}],[{x:a.x+a.width/2,y:a.y},{x:a.x+a.width,y:a.y},{x:a.x+a.width/2,y:a.y+a.height/2},{x:a.x+a.width,y:a.y+a.height/2}],[{x:a.x,y:a.y+a.height/2},{x:a.x+a.width/2,y:a.y+a.height/2},{x:a.x,y:a.y+a.height},{x:a.x+a.width/2,y:a.y+a.height}],[{x:a.x+a.width/2,y:a.y+a.height/2},{x:a.x+a.width,y:a.y+a.height/2},{x:a.x+a.width/
2,y:a.y+a.height},{x:a.x+a.width,y:a.y+a.height}]]},axis:function(a,b){return[{x:a[1].x-a[0].x,y:a[1].y-a[0].y},{x:a[1].x-a[3].x,y:a[1].y-a[3].y},{x:b[0].x-b[2].x,y:b[0].y-b[2].y},{x:b[0].x-b[1].x,y:b[0].y-b[1].y}]},projection:function(a,b){a=(a.x*b.x+a.y*b.y)/(Math.pow(b.x,2)+Math.pow(b.y,2));return{x:a*b.x,y:a*b.y}},axisCollision:function(a,b,c){for(var d=[],e=[],f=0;4>f;f++){var g=this.projection(b[f],a),h=this.projection(c[f],a);d.push(g.x*a.x+g.y*a.y);e.push(h.x*a.x+h.y*a.y)}a=Math.max.apply(Math,
d);b=Math.max.apply(Math,e);d=Math.min.apply(Math,d);return Math.min.apply(Math,e)<=a&&b>=d},collision:function(a,b){for(var c=this.axis(a,b),d=!0,e=0;4>e;e++)d=d&&this.axisCollision(c[e],a,b);return d}},k=function(){this._geom=m;this._tree=null;this._cache={query:!1,result:!1};this._enabled=!0};k.prototype.index=function(b,c){if(!this._enabled)return this._tree;if(!c.bounds)throw"sigma.classes.edgequad.index: bounds information not given.";var d=c.prefix||"";this._tree=f(c.bounds,0,c.maxElements,
c.maxLevel);c=b.edges();for(var e=0,h=c.length;e<h;e++){var g=b.nodes(c[e].source);var k=b.nodes(c[e].target);var l={x1:g[d+"x"],y1:g[d+"y"],x2:k[d+"x"],y2:k[d+"y"],size:c[e][d+"size"]||0};"curve"===c[e].type||"curvedArrow"===c[e].type?g.id===k.id?(l={x:g[d+"x"],y:g[d+"y"],size:g[d+"size"]||0},a(c[e],m.selfLoopToSquare(l),this._tree)):(g=sigma.utils.getQuadraticControlPoint(l.x1,l.y1,l.x2,l.y2),a(c[e],m.quadraticCurveToSquare(l,g),this._tree)):a(c[e],m.lineToSquare(l),this._tree)}this._cache={query:!1,
result:!1};return this._tree};k.prototype.point=function(a,b){return this._enabled?this._tree?c({x:a,y:b},this._tree)||[]:[]:[]};k.prototype.area=function(a){if(!this._enabled)return[];var c=JSON.stringify(a);if(this._cache.query===c)return this._cache.result;if(m.isAxisAligned(a)){var d=b;a=m.axisAlignedTopPoints(a)}else d=e,a=m.rectangleCorners(a);d=this._tree?h(a,this._tree,d):[];a=[];for(var f in d)a.push(d[f]);this._cache.query=c;return this._cache.result=a};"undefined"!==typeof this.sigma?(this.sigma.classes=
this.sigma.classes||{},this.sigma.classes.edgequad=k):"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=k),exports.edgequad=k):this.edgequad=k}).call(this);
(function(d){if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors");sigma.captors.mouse=function(b,d,a){function c(a){if(q("mouseEnabled")&&(l.dispatchEvent("mousemove",sigma.utils.mouseCoords(a)),y)){z=x=!0;A&&clearTimeout(A);A=setTimeout(function(){x=!1},q("dragTimeout"));sigma.misc.animation.killAll(n);n.isMoving=!0;var b=n.cameraPosition(sigma.utils.getX(a)-r,sigma.utils.getY(a)-w,!0);var c=p-b.x;b=t-b.y;if(c!==n.x||b!==n.y)u=n.x,v=n.y,n.goTo({x:c,y:b});a.preventDefault?
a.preventDefault():a.returnValue=!1;a.stopPropagation();return!1}}function e(a){if(q("mouseEnabled")&&y){y=!1;A&&clearTimeout(A);n.isMoving=!1;var b=sigma.utils.getX(a),c=sigma.utils.getY(a);x?(sigma.misc.animation.killAll(n),sigma.misc.animation.camera(n,{x:n.x+q("mouseInertiaRatio")*(n.x-u),y:n.y+q("mouseInertiaRatio")*(n.y-v)},{easing:"quadraticOut",duration:q("mouseInertiaDuration")})):r===b&&w===c||n.goTo({x:n.x,y:n.y});l.dispatchEvent("mouseup",sigma.utils.mouseCoords(a));x=!1}}function f(a){if(q("mouseEnabled"))switch(p=
n.x,t=n.y,u=n.x,v=n.y,r=sigma.utils.getX(a),w=sigma.utils.getY(a),z=!1,B=(new Date).getTime(),a.which){case 2:break;case 3:l.dispatchEvent("rightclick",sigma.utils.mouseCoords(a,r,w));break;default:y=!0,l.dispatchEvent("mousedown",sigma.utils.mouseCoords(a,r,w))}}function m(a){q("mouseEnabled")&&l.dispatchEvent("mouseout")}function k(a){if(q("mouseEnabled")){var b=sigma.utils.mouseCoords(a);b.isDragging=100<(new Date).getTime()-B&&z;l.dispatchEvent("click",b)}a.preventDefault?a.preventDefault():a.returnValue=
!1;a.stopPropagation();return!1}function g(a){var b=sigma.utils.getDelta(a);if(q("mouseEnabled")&&q("mouseWheelEnabled")&&0!==b){var c=0<b?1/q("zoomingRatio"):q("zoomingRatio");b=n.cameraPosition(sigma.utils.getX(a)-sigma.utils.getCenter(a).x,sigma.utils.getY(a)-sigma.utils.getCenter(a).y,!0);var d={duration:q("mouseZoomDuration")};sigma.utils.zoomTo(n,b.x,b.y,c,d);a.preventDefault?a.preventDefault():a.returnValue=!1;a.stopPropagation();return!1}}var l=this,n=d,q=a,p,t,u,v,r,w,y,x,z,B,A;sigma.classes.dispatcher.extend(this);
sigma.utils.doubleClick(b,"click",function(a){if(q("mouseEnabled")){var b=1/q("doubleClickZoomingRatio");l.dispatchEvent("doubleclick",sigma.utils.mouseCoords(a,r,w));if(q("doubleClickEnabled")){var c=n.cameraPosition(sigma.utils.getX(a)-sigma.utils.getCenter(a).x,sigma.utils.getY(a)-sigma.utils.getCenter(a).y,!0);var d={duration:q("doubleClickZoomDuration")};sigma.utils.zoomTo(n,c.x,c.y,b,d)}a.preventDefault?a.preventDefault():a.returnValue=!1;a.stopPropagation();return!1}});b.addEventListener("DOMMouseScroll",
g,!1);b.addEventListener("mousewheel",g,!1);b.addEventListener("mousemove",c,!1);b.addEventListener("mousedown",f,!1);b.addEventListener("click",k,!1);b.addEventListener("mouseout",m,!1);document.addEventListener("mouseup",e,!1);this.kill=function(){sigma.utils.unbindDoubleClick(b,"click");b.removeEventListener("DOMMouseScroll",g);b.removeEventListener("mousewheel",g);b.removeEventListener("mousemove",c);b.removeEventListener("mousedown",f);b.removeEventListener("click",k);b.removeEventListener("mouseout",
m);document.removeEventListener("mouseup",e)}}}).call(this);
(function(d){if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors");sigma.captors.touch=function(b,d,a){function c(a){var b=sigma.utils.getOffset(g);return{x:a.pageX-b.left,y:a.pageY-b.top}}function e(a){if(n("touchEnabled"))switch(w=a.touches,w.length){case 1:l.isMoving=!0;D=1;q=l.x;p=l.y;v=l.x;r=l.y;var b=c(w[0]);y=b.x;x=b.y;break;case 2:l.isMoving=!0;D=2;b=c(w[0]);var d=c(w[1]);var e=b.x;var f=b.y;b=d.x;d=d.y;v=l.x;r=l.y;t=l.angle;u=l.ratio;q=l.x;p=l.y;y=e;
x=f;z=b;B=d;A=Math.atan2(B-x,z-y);C=Math.sqrt((B-x)*(B-x)+(z-y)*(z-y));a.preventDefault();return!1}}function f(a){if(n("touchEnabled")){w=a.touches;var b=n("touchInertiaRatio");G&&(E=!1,clearTimeout(G));switch(D){case 2:if(1===a.touches.length){e(a);a.preventDefault();break}case 1:l.isMoving=!1,k.dispatchEvent("stopDrag"),E&&(F=!1,sigma.misc.animation.camera(l,{x:l.x+b*(l.x-v),y:l.y+b*(l.y-r)},{easing:"quadraticOut",duration:n("touchInertiaDuration")})),E=!1,D=0}}}function m(a){if(!F&&n("touchEnabled")){w=
a.touches;E=!0;G&&clearTimeout(G);G=setTimeout(function(){E=!1},n("dragTimeout"));switch(D){case 1:var b=c(w[0]);var d=b.x;var e=b.y;e=l.cameraPosition(d-y,e-x,!0);d=q-e.x;e=p-e.y;if(d!==l.x||e!==l.y)v=l.x,r=l.y,l.goTo({x:d,y:e}),k.dispatchEvent("mousemove",sigma.utils.mouseCoords(a,b.x,b.y)),k.dispatchEvent("drag");break;case 2:b=c(w[0]);var f=c(w[1]);d=b.x;e=b.y;var h=f.x;f=f.y;var g=l.cameraPosition((y+z)/2-sigma.utils.getCenter(a).x,(x+B)/2-sigma.utils.getCenter(a).y,!0);b=l.cameraPosition((d+
h)/2-sigma.utils.getCenter(a).x,(e+f)/2-sigma.utils.getCenter(a).y,!0);var m=Math.atan2(f-e,h-d)-A;f=Math.sqrt((f-e)*(f-e)+(h-d)*(h-d))/C;d=g.x;e=g.y;h=u/f;d*=f;e*=f;g=t-m;var H=Math.cos(-m);m=Math.sin(-m);f=e*H-d*m;d=d*H+e*m-b.x+q;e=f-b.y+p;if(h!==l.ratio||g!==l.angle||d!==l.x||e!==l.y)v=l.x,r=l.y,l.goTo({x:d,y:e,angle:g,ratio:h}),k.dispatchEvent("drag")}a.preventDefault();return!1}}var k=this,g=b,l=d,n=a,q,p,t,u,v,r,w=[],y,x,z,B,A,C,D,E,F,G;sigma.classes.dispatcher.extend(this);sigma.utils.doubleClick(g,
"touchstart",function(a){if(a.touches&&1===a.touches.length&&n("touchEnabled")){F=!0;var b=1/n("doubleClickZoomingRatio");var d=c(a.touches[0]);k.dispatchEvent("doubleclick",sigma.utils.mouseCoords(a,d.x,d.y));if(n("doubleClickEnabled")){d=l.cameraPosition(d.x-sigma.utils.getCenter(a).x,d.y-sigma.utils.getCenter(a).y,!0);var e={duration:n("doubleClickZoomDuration"),onComplete:function(){F=!1}};sigma.utils.zoomTo(l,d.x,d.y,b,e)}a.preventDefault?a.preventDefault():a.returnValue=!1;a.stopPropagation();
return!1}});g.addEventListener("touchstart",e,!1);g.addEventListener("touchend",f,!1);g.addEventListener("touchcancel",f,!1);g.addEventListener("touchleave",f,!1);g.addEventListener("touchmove",m,!1);this.kill=function(){sigma.utils.unbindDoubleClick(g,"touchstart");g.addEventListener("touchstart",e);g.addEventListener("touchend",f);g.addEventListener("touchcancel",f);g.addEventListener("touchleave",f);g.addEventListener("touchmove",m)}}}).call(this);
(function(d){if("undefined"===typeof sigma)throw"sigma is not declared";if("undefined"===typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers");sigma.renderers.canvas=function(b,d,a,c){if("object"!==typeof c)throw"sigma.renderers.canvas: Wrong arguments.";if(!(c.container instanceof HTMLElement))throw"Container not found.";sigma.classes.dispatcher.extend(this);Object.defineProperty(this,"conradId",{value:sigma.utils.id()});this.graph=b;this.camera=d;this.contexts={};this.domElements=
{};this.options=c;this.container=this.options.container;this.settings="object"===typeof c.settings&&c.settings?a.embedObjects(c.settings):a;this.nodesOnScreen=[];this.edgesOnScreen=[];this.jobs={};this.options.prefix="renderer"+this.conradId+":";this.settings("batchEdgesDrawing")?(this.initDOM("canvas","edges"),this.initDOM("canvas","scene")):(this.initDOM("canvas","scene"),this.contexts.edges=this.contexts.scene);this.contexts.nodes=this.contexts.scene;this.contexts.labels=this.contexts.scene;this.initDOM("canvas",
"mouse");this.contexts.hover=this.contexts.mouse;this.captors=[];a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch];b=0;for(d=a.length;b<d;b++)c="function"===typeof a[b]?a[b]:sigma.captors[a[b]],this.captors.push(new c(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.options.prefix);sigma.misc.drawHovers.call(this,this.options.prefix);this.resize(!1)};sigma.renderers.canvas.prototype.render=function(b){b=b||{};var e,a;var c={};var h=this.graph,
f=this.graph.nodes,m=this.settings(b,"drawEdges"),k=this.settings(b,"drawNodes"),g=this.settings(b,"drawLabels"),l=this.settings(b,"drawEdgeLabels"),n=this.settings.embedObjects(b,{prefix:this.options.prefix});this.resize(!1);this.settings(b,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(m=!1);this.camera.applyView(d,this.options.prefix,{width:this.width,height:this.height});this.clear();for(q in this.jobs)conrad.hasJob(q)&&conrad.killJob(q);this.edgesOnScreen=[];var q=this.nodesOnScreen=
this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height));var p=0;for(e=q.length;p<e;p++)c[q[p].id]=q[p];if(m){q=h.edges();p=0;for(e=q.length;p<e;p++){var t=q[p];!c[t.source]&&!c[t.target]||t.hidden||f(t.source).hidden||f(t.target).hidden||this.edgesOnScreen.push(t)}if(this.settings(b,"batchEdgesDrawing")){var u="edges_"+this.conradId;var v=n("canvasEdgesBatchSize");var r=this.edgesOnScreen;e=r.length;var w=0;var y=Math.min(r.length,w+v);c=function(){a=this.contexts.edges.globalCompositeOperation;
this.contexts.edges.globalCompositeOperation="destination-over";x=sigma.canvas.edges;for(p=w;p<y;p++)t=r[p],(x[t.type||this.settings(b,"defaultEdgeType")]||x.def)(t,h.nodes(t.source),h.nodes(t.target),this.contexts.edges,n);if(l)for(x=sigma.canvas.edges.labels,p=w;p<y;p++)t=r[p],t.hidden||(x[t.type||this.settings(b,"defaultEdgeType")]||x.def)(t,h.nodes(t.source),h.nodes(t.target),this.contexts.labels,n);this.contexts.edges.globalCompositeOperation=a;if(y===r.length)return delete this.jobs[u],!1;w=
y+1;y=Math.min(r.length,w+v);return!0};this.jobs[u]=c;conrad.addJob(u,c.bind(this))}else{var x=sigma.canvas.edges;q=this.edgesOnScreen;p=0;for(e=q.length;p<e;p++)t=q[p],(x[t.type||this.settings(b,"defaultEdgeType")]||x.def)(t,h.nodes(t.source),h.nodes(t.target),this.contexts.edges,n);if(l)for(x=sigma.canvas.edges.labels,q=this.edgesOnScreen,p=0,e=q.length;p<e;p++)q[p].hidden||(x[q[p].type||this.settings(b,"defaultEdgeType")]||x.def)(q[p],h.nodes(q[p].source),h.nodes(q[p].target),this.contexts.labels,
n)}}if(k)for(x=sigma.canvas.nodes,q=this.nodesOnScreen,p=0,e=q.length;p<e;p++)q[p].hidden||(x[q[p].type||this.settings(b,"defaultNodeType")]||x.def)(q[p],this.contexts.nodes,n);if(g)for(x=sigma.canvas.labels,q=this.nodesOnScreen,p=0,e=q.length;p<e;p++)q[p].hidden||(x[q[p].type||this.settings(b,"defaultNodeType")]||x.def)(q[p],this.contexts.labels,n);this.dispatchEvent("render");return this};sigma.renderers.canvas.prototype.initDOM=function(b,d){var a=document.createElement(b);a.style.position="absolute";
a.setAttribute("class","sigma-"+d);this.domElements[d]=a;this.container.appendChild(a);"canvas"===b.toLowerCase()&&(this.contexts[d]=a.getContext("2d"))};sigma.renderers.canvas.prototype.resize=function(b,e){var a,c=this.width,h=this.height,f=sigma.utils.getPixelRatio();b!==d&&e!==d?(this.width=b,this.height=e):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,b=this.width,e=this.height);if(c!==this.width||h!==this.height)for(a in this.domElements)this.domElements[a].style.width=
b+"px",this.domElements[a].style.height=e+"px","canvas"===this.domElements[a].tagName.toLowerCase()&&(this.domElements[a].setAttribute("width",b*f+"px"),this.domElements[a].setAttribute("height",e*f+"px"),1!==f&&this.contexts[a].scale(f,f));return this};sigma.renderers.canvas.prototype.clear=function(){for(var b in this.contexts)this.contexts[b].clearRect(0,0,this.width,this.height);return this};sigma.renderers.canvas.prototype.kill=function(){for(var b,d;d=this.captors.pop();)d.kill();delete this.captors;
for(b in this.domElements)this.domElements[b].parentNode.removeChild(this.domElements[b]),delete this.domElements[b],delete this.contexts[b];delete this.domElements;delete this.contexts};sigma.utils.pkg("sigma.canvas.nodes");sigma.utils.pkg("sigma.canvas.edges");sigma.utils.pkg("sigma.canvas.labels")}).call(this);
(function(d){if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers");sigma.renderers.webgl=function(b,d,a,c){if("object"!==typeof c)throw"sigma.renderers.webgl: Wrong arguments.";if(!(c.container instanceof HTMLElement))throw"Container not found.";sigma.classes.dispatcher.extend(this);this.jobs={};Object.defineProperty(this,"conradId",{value:sigma.utils.id()});this.graph=b;this.camera=d;this.contexts={};this.domElements={};this.options=c;this.container=this.options.container;
this.settings="object"===typeof c.settings&&c.settings?a.embedObjects(c.settings):a;this.options.prefix=this.camera.readPrefix;Object.defineProperty(this,"nodePrograms",{value:{}});Object.defineProperty(this,"edgePrograms",{value:{}});Object.defineProperty(this,"nodeFloatArrays",{value:{}});Object.defineProperty(this,"edgeFloatArrays",{value:{}});Object.defineProperty(this,"edgeIndicesArrays",{value:{}});this.settings(c,"batchEdgesDrawing")?(this.initDOM("canvas","edges",!0),this.initDOM("canvas",
"nodes",!0)):(this.initDOM("canvas","scene",!0),this.contexts.nodes=this.contexts.scene,this.contexts.edges=this.contexts.scene);this.initDOM("canvas","labels");this.initDOM("canvas","mouse");this.contexts.hover=this.contexts.mouse;this.captors=[];a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch];b=0;for(d=a.length;b<d;b++)c="function"===typeof a[b]?a[b]:sigma.captors[a[b]],this.captors.push(new c(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.camera.prefix);
sigma.misc.drawHovers.call(this,this.camera.prefix);this.resize()};sigma.renderers.webgl.prototype.process=function(){var b,d=this.graph,a=sigma.utils.extend(a,this.options);var c=this.settings(a,"defaultEdgeType");var h=this.settings(a,"defaultNodeType");for(k in this.nodeFloatArrays)delete this.nodeFloatArrays[k];for(k in this.edgeFloatArrays)delete this.edgeFloatArrays[k];for(k in this.edgeIndicesArrays)delete this.edgeIndicesArrays[k];var f=d.edges();var m=0;for(b=f.length;m<b;m++){var k=(k=f[m].type||
c)&&sigma.webgl.edges[k]?k:"def";this.edgeFloatArrays[k]||(this.edgeFloatArrays[k]={edges:[]});this.edgeFloatArrays[k].edges.push(f[m])}f=d.nodes();m=0;for(b=f.length;m<b;m++)k=(k=f[m].type||h)&&sigma.webgl.nodes[k]?k:"def",this.nodeFloatArrays[k]||(this.nodeFloatArrays[k]={nodes:[]}),this.nodeFloatArrays[k].nodes.push(f[m]);for(k in this.edgeFloatArrays){c=sigma.webgl.edges[k];f=this.edgeFloatArrays[k].edges;this.edgeFloatArrays[k].array=new Float32Array(f.length*c.POINTS*c.ATTRIBUTES);m=0;for(b=
f.length;m<b;m++)f[m].hidden||d.nodes(f[m].source).hidden||d.nodes(f[m].target).hidden||c.addEdge(f[m],d.nodes(f[m].source),d.nodes(f[m].target),this.edgeFloatArrays[k].array,m*c.POINTS*c.ATTRIBUTES,a.prefix,this.settings);"function"===typeof c.computeIndices&&(this.edgeIndicesArrays[k]=c.computeIndices(this.edgeFloatArrays[k].array))}for(k in this.nodeFloatArrays)for(c=sigma.webgl.nodes[k],f=this.nodeFloatArrays[k].nodes,this.nodeFloatArrays[k].array=new Float32Array(f.length*c.POINTS*c.ATTRIBUTES),
m=0,b=f.length;m<b;m++)this.nodeFloatArrays[k].array||(this.nodeFloatArrays[k].array=new Float32Array(f.length*c.POINTS*c.ATTRIBUTES)),f[m].hidden||c.addNode(f[m],this.nodeFloatArrays[k].array,m*c.POINTS*c.ATTRIBUTES,a.prefix,this.settings);return this};sigma.renderers.webgl.prototype.render=function(b){var e=this;var a=this.contexts.nodes;var c=this.contexts.edges,h=this.camera.getMatrix(),f=sigma.utils.extend(b,this.options);b=this.settings(f,"drawLabels");var m=this.settings(f,"drawEdges");var k=
this.settings(f,"drawNodes");this.resize(!1);this.settings(f,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(m=!1);this.clear();h=sigma.utils.matrices.multiply(h,sigma.utils.matrices.translation(this.width/2,this.height/2));for(g in this.jobs)conrad.hasJob(g)&&conrad.killJob(g);if(m)if(this.settings(f,"batchEdgesDrawing"))(function(){var a="edges_"+this.conradId;var b=this.settings(f,"webglEdgesBatchSize");var d=Object.keys(this.edgeFloatArrays);if(d.length){var e=0;var g=sigma.webgl.edges[d[e]];
var k=this.edgeFloatArrays[d[e]].array;var m=this.edgeIndicesArrays[d[e]];var r=0;var w=Math.min(r+b*g.POINTS,k.length/g.ATTRIBUTES);var y=function(){this.edgePrograms[d[e]]||(this.edgePrograms[d[e]]=g.initProgram(c));r<w&&(c.useProgram(this.edgePrograms[d[e]]),g.render(c,this.edgePrograms[d[e]],k,{settings:this.settings,matrix:h,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(f,"webglOversamplingRatio"),start:r,count:w-r,indicesData:m}));if(w>=k.length/g.ATTRIBUTES&&
e===d.length-1)return delete this.jobs[a],!1;w>=k.length/g.ATTRIBUTES?(e++,k=this.edgeFloatArrays[d[e]].array,g=sigma.webgl.edges[d[e]],r=0):r=w;w=Math.min(r+b*g.POINTS,k.length/g.ATTRIBUTES);return!0};this.jobs[a]=y;conrad.addJob(a,y.bind(this))}}).call(this);else for(g in this.edgeFloatArrays)m=sigma.webgl.edges[g],this.edgePrograms[g]||(this.edgePrograms[g]=m.initProgram(c)),this.edgeFloatArrays[g]&&(c.useProgram(this.edgePrograms[g]),m.render(c,this.edgePrograms[g],this.edgeFloatArrays[g].array,
{settings:this.settings,matrix:h,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(f,"webglOversamplingRatio"),indicesData:this.edgeIndicesArrays[g]}));if(k)for(g in a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),a.enable(a.BLEND),this.nodeFloatArrays)m=sigma.webgl.nodes[g],this.nodePrograms[g]||(this.nodePrograms[g]=m.initProgram(a)),this.nodeFloatArrays[g]&&(a.useProgram(this.nodePrograms[g]),m.render(a,this.nodePrograms[g],this.nodeFloatArrays[g].array,{settings:this.settings,
matrix:h,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(f,"webglOversamplingRatio")}));if(b){var g=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height));this.camera.applyView(d,d,{nodes:g,edges:[],width:this.width,height:this.height});k=function(a){return e.settings({prefix:e.camera.prefix},a)};a=0;for(b=g.length;a<b;a++)g[a].hidden||(sigma.canvas.labels[g[a].type||this.settings(f,"defaultNodeType")]||sigma.canvas.labels.def)(g[a],this.contexts.labels,
k)}this.dispatchEvent("render");return this};sigma.renderers.webgl.prototype.initDOM=function(b,d,a){var c=document.createElement(b),e=this;c.style.position="absolute";c.setAttribute("class","sigma-"+d);this.domElements[d]=c;this.container.appendChild(c);"canvas"===b.toLowerCase()&&(this.contexts[d]=c.getContext(a?"experimental-webgl":"2d",{preserveDrawingBuffer:!0}),a&&(c.addEventListener("webglcontextlost",function(a){a.preventDefault()},!1),c.addEventListener("webglcontextrestored",function(a){e.render()},
!1)))};sigma.renderers.webgl.prototype.resize=function(b,e){var a,c=this.width,h=this.height,f=sigma.utils.getPixelRatio();b!==d&&e!==d?(this.width=b,this.height=e):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,b=this.width,e=this.height);if(c!==this.width||h!==this.height)for(a in this.domElements)this.domElements[a].style.width=b+"px",this.domElements[a].style.height=e+"px","canvas"===this.domElements[a].tagName.toLowerCase()&&(this.contexts[a]&&this.contexts[a].scale?
(this.domElements[a].setAttribute("width",b*f+"px"),this.domElements[a].setAttribute("height",e*f+"px"),1!==f&&this.contexts[a].scale(f,f)):(this.domElements[a].setAttribute("width",b*this.settings("webglOversamplingRatio")+"px"),this.domElements[a].setAttribute("height",e*this.settings("webglOversamplingRatio")+"px")));for(a in this.contexts)this.contexts[a]&&this.contexts[a].viewport&&this.contexts[a].viewport(0,0,this.width*this.settings("webglOversamplingRatio"),this.height*this.settings("webglOversamplingRatio"));
return this};sigma.renderers.webgl.prototype.clear=function(){this.contexts.labels.clearRect(0,0,this.width,this.height);this.contexts.nodes.clear(this.contexts.nodes.COLOR_BUFFER_BIT);this.contexts.edges.clear(this.contexts.edges.COLOR_BUFFER_BIT);return this};sigma.renderers.webgl.prototype.kill=function(){for(var b,d;d=this.captors.pop();)d.kill();delete this.captors;for(b in this.domElements)this.domElements[b].parentNode.removeChild(this.domElements[b]),delete this.domElements[b],delete this.contexts[b];
delete this.domElements;delete this.contexts};sigma.utils.pkg("sigma.webgl.nodes");sigma.utils.pkg("sigma.webgl.edges");sigma.utils.pkg("sigma.canvas.labels")}).call(this);
(function(d){if("undefined"===typeof sigma)throw"sigma is not declared";if("undefined"===typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers");sigma.renderers.svg=function(b,d,a,c){if("object"!==typeof c)throw"sigma.renderers.svg: Wrong arguments.";if(!(c.container instanceof HTMLElement))throw"Container not found.";var e=this;sigma.classes.dispatcher.extend(this);this.graph=b;this.camera=d;this.domElements={graph:null,groups:{},nodes:{},edges:{},labels:{},hovers:{}};this.measurementCanvas=
null;this.options=c;this.container=this.options.container;this.settings="object"===typeof c.settings&&c.settings?a.embedObjects(c.settings):a;this.settings("freeStyle",!!this.options.freeStyle);this.settings("xmlns","http://www.w3.org/2000/svg");this.nodesOnScreen=[];this.edgesOnScreen=[];this.options.prefix="renderer"+sigma.utils.id()+":";this.initDOM("svg");this.captors=[];a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch];b=0;for(d=a.length;b<d;b++)c="function"===typeof a[b]?a[b]:
sigma.captors[a[b]],this.captors.push(new c(this.domElements.graph,this.camera,this.settings));window.addEventListener("resize",function(){e.resize()});sigma.misc.bindDOMEvents.call(this,this.domElements.graph);this.bindHovers(this.options.prefix);this.resize(!1)};sigma.renderers.svg.prototype.render=function(b){b=b||{};var e;var a={};var c=this.graph;var h=this.graph.nodes,f=this.settings(b,"drawEdges");var m=this.settings(b,"drawNodes");this.settings(b,"drawLabels");var k=this.settings.embedObjects(b,
{prefix:this.options.prefix,forceLabels:this.options.forceLabels});this.settings(b,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(f=!1);this.camera.applyView(d,this.options.prefix,{width:this.width,height:this.height});this.hideDOMElements(this.domElements.nodes);this.hideDOMElements(this.domElements.edges);this.hideDOMElements(this.domElements.labels);this.edgesOnScreen=[];b=this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height));var g=
0;for(e=b.length;g<e;g++)a[b[g].id]=b[g];b=c.edges();g=0;for(e=b.length;g<e;g++)c=b[g],!a[c.source]&&!a[c.target]||c.hidden||h(c.source).hidden||h(c.target).hidden||this.edgesOnScreen.push(c);a=sigma.svg.nodes;var l=sigma.svg.labels;if(m)for(b=this.nodesOnScreen,g=0,e=b.length;g<e;g++)b[g].hidden||this.domElements.nodes[b[g].id]||(c=(a[b[g].type]||a.def).create(b[g],k),this.domElements.nodes[b[g].id]=c,this.domElements.groups.nodes.appendChild(c),c=(l[b[g].type]||l.def).create(b[g],k),this.domElements.labels[b[g].id]=
c,this.domElements.groups.labels.appendChild(c));if(m)for(b=this.nodesOnScreen,g=0,e=b.length;g<e;g++)b[g].hidden||((a[b[g].type]||a.def).update(b[g],this.domElements.nodes[b[g].id],k),(l[b[g].type]||l.def).update(b[g],this.domElements.labels[b[g].id],k));a=sigma.svg.edges;if(f)for(b=this.edgesOnScreen,g=0,e=b.length;g<e;g++)this.domElements.edges[b[g].id]||(m=h(b[g].source),c=h(b[g].target),c=(a[b[g].type]||a.def).create(b[g],m,c,k),this.domElements.edges[b[g].id]=c,this.domElements.groups.edges.appendChild(c));
if(f)for(b=this.edgesOnScreen,g=0,e=b.length;g<e;g++)m=h(b[g].source),c=h(b[g].target),(a[b[g].type]||a.def).update(b[g],this.domElements.edges[b[g].id],m,c,k);this.dispatchEvent("render");return this};sigma.renderers.svg.prototype.initDOM=function(b){var d=document.createElementNS(this.settings("xmlns"),b);b=this.settings("classPrefix");var a;d.style.position="absolute";d.setAttribute("class",b+"-svg");d.setAttribute("xmlns",this.settings("xmlns"));d.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");
d.setAttribute("version","1.1");var c=document.createElement("canvas");c.setAttribute("class",b+"-measurement-canvas");this.domElements.graph=this.container.appendChild(d);var h=["edges","nodes","labels","hovers"];var f=0;for(a=h.length;f<a;f++)d=document.createElementNS(this.settings("xmlns"),"g"),d.setAttributeNS(null,"id",b+"-group-"+h[f]),d.setAttributeNS(null,"class",b+"-group"),this.domElements.groups[h[f]]=this.domElements.graph.appendChild(d);this.container.appendChild(c);this.measurementCanvas=
c.getContext("2d")};sigma.renderers.svg.prototype.hideDOMElements=function(b){var d;for(d in b){var a=b[d];sigma.svg.utils.hide(a)}return this};sigma.renderers.svg.prototype.bindHovers=function(b){var d=sigma.svg.hovers,a=this,c;this.bind("overNode",function(e){e=e.data.node;var f=a.settings.embedObjects({prefix:b});f("enableHovering")&&(f=(d[e.type]||d.def).create(e,a.domElements.nodes[e.id],a.measurementCanvas,f),a.domElements.hovers[e.id]=f,a.domElements.groups.hovers.appendChild(f),c=e)});this.bind("outNode",
function(d){d=d.data.node;a.settings.embedObjects({prefix:b})("enableHovering")&&(a.domElements.groups.hovers.removeChild(a.domElements.hovers[d.id]),c=null,delete a.domElements.hovers[d.id],a.domElements.groups.nodes.appendChild(a.domElements.nodes[d.id]))});this.bind("render",function(){if(c){var e=a.settings.embedObjects({prefix:b});a.domElements.groups.hovers.removeChild(a.domElements.hovers[c.id]);delete a.domElements.hovers[c.id];e=(d[c.type]||d.def).create(c,a.domElements.nodes[c.id],a.measurementCanvas,
e);a.domElements.hovers[c.id]=e;a.domElements.groups.hovers.appendChild(e)}})};sigma.renderers.svg.prototype.resize=function(b,e){var a=this.width,c=this.height;b!==d&&e!==d?(this.width=b,this.height=e):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,b=this.width,e=this.height);if(a!==this.width||c!==this.height)this.domElements.graph.style.width=b+"px",this.domElements.graph.style.height=e+"px","svg"===this.domElements.graph.tagName.toLowerCase()&&(this.domElements.graph.setAttribute("width",
1*b),this.domElements.graph.setAttribute("height",1*e));return this};sigma.utils.pkg("sigma.svg.nodes");sigma.utils.pkg("sigma.svg.edges");sigma.utils.pkg("sigma.svg.labels")}).call(this);(function(d){if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers");var b=!!d.WebGLRenderingContext;if(b){d=document.createElement("canvas");try{b=!(!d.getContext("webgl")&&!d.getContext("experimental-webgl"))}catch(e){b=!1}}sigma.renderers.def=b?sigma.renderers.webgl:sigma.renderers.canvas})(this);
(function(){sigma.utils.pkg("sigma.webgl.nodes");sigma.webgl.nodes.def={POINTS:3,ATTRIBUTES:5,addNode:function(d,b,e,a,c){c=sigma.utils.floatColor(d.color||c("defaultNodeColor"));b[e++]=d[a+"x"];b[e++]=d[a+"y"];b[e++]=d[a+"size"];b[e++]=c;b[e++]=0;b[e++]=d[a+"x"];b[e++]=d[a+"y"];b[e++]=d[a+"size"];b[e++]=c;b[e++]=2*Math.PI/3;b[e++]=d[a+"x"];b[e++]=d[a+"y"];b[e++]=d[a+"size"];b[e++]=c;b[e++]=4*Math.PI/3},render:function(d,b,e,a){var c=d.getAttribLocation(b,"a_position"),h=d.getAttribLocation(b,"a_size"),
f=d.getAttribLocation(b,"a_color"),m=d.getAttribLocation(b,"a_angle"),k=d.getUniformLocation(b,"u_resolution"),g=d.getUniformLocation(b,"u_matrix"),l=d.getUniformLocation(b,"u_ratio"),n=d.getUniformLocation(b,"u_scale");b=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,b);d.bufferData(d.ARRAY_BUFFER,e,d.DYNAMIC_DRAW);d.uniform2f(k,a.width,a.height);d.uniform1f(l,1/Math.pow(a.ratio,a.settings("nodesPowRatio")));d.uniform1f(n,a.scalingRatio);d.uniformMatrix3fv(g,!1,a.matrix);d.enableVertexAttribArray(c);
d.enableVertexAttribArray(h);d.enableVertexAttribArray(f);d.enableVertexAttribArray(m);d.vertexAttribPointer(c,2,d.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0);d.vertexAttribPointer(h,1,d.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8);d.vertexAttribPointer(f,1,d.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12);d.vertexAttribPointer(m,1,d.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16);d.drawArrays(d.TRIANGLES,a.start||0,a.count||e.length/this.ATTRIBUTES)},
initProgram:function(d){var b=sigma.utils.loadShader(d,"attribute vec2 a_position;\nattribute float a_size;\nattribute float a_color;\nattribute float a_angle;\nuniform vec2 u_resolution;\nuniform float u_ratio;\nuniform float u_scale;\nuniform mat3 u_matrix;\nvarying vec4 color;\nvarying vec2 center;\nvarying float radius;\nvoid main() {\nradius \x3d a_size * u_ratio;\nvec2 position \x3d (u_matrix * vec3(a_position, 1)).xy;\ncenter \x3d position * u_scale;\ncenter \x3d vec2(center.x, u_scale * u_resolution.y - center.y);\nposition \x3d position +\n2.0 * radius * vec2(cos(a_angle), sin(a_angle));\nposition \x3d (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);\nradius \x3d radius * u_scale;\ngl_Position \x3d vec4(position, 0, 1);\nfloat c \x3d a_color;\ncolor.b \x3d mod(c, 256.0); c \x3d floor(c / 256.0);\ncolor.g \x3d mod(c, 256.0); c \x3d floor(c / 256.0);\ncolor.r \x3d mod(c, 256.0); c \x3d floor(c / 256.0); color /\x3d 255.0;\ncolor.a \x3d 1.0;\n}",
d.VERTEX_SHADER);var e=sigma.utils.loadShader(d,"precision mediump float;\nvarying vec4 color;\nvarying vec2 center;\nvarying float radius;\nvoid main(void) {\nvec4 color0 \x3d vec4(0.0, 0.0, 0.0, 0.0);\nvec2 m \x3d gl_FragCoord.xy - center;\nfloat diff \x3d radius - sqrt(m.x * m.x + m.y * m.y);\nif (diff \x3e 0.0)\ngl_FragColor \x3d color;\nelse\ngl_FragColor \x3d color0;\n}",d.FRAGMENT_SHADER);return sigma.utils.loadProgram(d,[b,e])}}})();
(function(){sigma.utils.pkg("sigma.webgl.nodes");sigma.webgl.nodes.fast={POINTS:1,ATTRIBUTES:4,addNode:function(d,b,e,a,c){b[e++]=d[a+"x"];b[e++]=d[a+"y"];b[e++]=d[a+"size"];b[e++]=sigma.utils.floatColor(d.color||c("defaultNodeColor"))},render:function(d,b,e,a){var c=d.getAttribLocation(b,"a_position"),h=d.getAttribLocation(b,"a_size"),f=d.getAttribLocation(b,"a_color"),m=d.getUniformLocation(b,"u_resolution"),k=d.getUniformLocation(b,"u_matrix"),g=d.getUniformLocation(b,"u_ratio"),l=d.getUniformLocation(b,
"u_scale");b=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,b);d.bufferData(d.ARRAY_BUFFER,e,d.DYNAMIC_DRAW);d.uniform2f(m,a.width,a.height);d.uniform1f(g,1/Math.pow(a.ratio,a.settings("nodesPowRatio")));d.uniform1f(l,a.scalingRatio);d.uniformMatrix3fv(k,!1,a.matrix);d.enableVertexAttribArray(c);d.enableVertexAttribArray(h);d.enableVertexAttribArray(f);d.vertexAttribPointer(c,2,d.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0);d.vertexAttribPointer(h,1,d.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,
8);d.vertexAttribPointer(f,1,d.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12);d.drawArrays(d.POINTS,a.start||0,a.count||e.length/this.ATTRIBUTES)},initProgram:function(d){var b=sigma.utils.loadShader(d,"attribute vec2 a_position;\nattribute float a_size;\nattribute float a_color;\nuniform vec2 u_resolution;\nuniform float u_ratio;\nuniform float u_scale;\nuniform mat3 u_matrix;\nvarying vec4 color;\nvoid main() {\ngl_Position \x3d vec4(\n((u_matrix * vec3(a_position, 1)).xy /\nu_resolution * 2.0 - 1.0) * vec2(1, -1),\n0,\n1\n);\ngl_PointSize \x3d a_size * u_ratio * u_scale * 2.0;\nfloat c \x3d a_color;\ncolor.b \x3d mod(c, 256.0); c \x3d floor(c / 256.0);\ncolor.g \x3d mod(c, 256.0); c \x3d floor(c / 256.0);\ncolor.r \x3d mod(c, 256.0); c \x3d floor(c / 256.0); color /\x3d 255.0;\ncolor.a \x3d 1.0;\n}",
d.VERTEX_SHADER);var e=sigma.utils.loadShader(d,"precision mediump float;\nvarying vec4 color;\nvoid main(void) {\nfloat border \x3d 0.01;\nfloat radius \x3d 0.5;\nvec4 color0 \x3d vec4(0.0, 0.0, 0.0, 0.0);\nvec2 m \x3d gl_PointCoord - vec2(0.5, 0.5);\nfloat dist \x3d radius - sqrt(m.x * m.x + m.y * m.y);\nfloat t \x3d 0.0;\nif (dist \x3e border)\nt \x3d 1.0;\nelse if (dist \x3e 0.0)\nt \x3d dist / border;\ngl_FragColor \x3d mix(color0, color, t);\n}",d.FRAGMENT_SHADER);return sigma.utils.loadProgram(d,
[b,e])}}})();
(function(){sigma.utils.pkg("sigma.webgl.edges");sigma.webgl.edges.def={POINTS:6,ATTRIBUTES:7,addEdge:function(d,b,e,a,c,h,f){var m=(d[h+"size"]||1)/2,k=b[h+"x"],g=b[h+"y"],l=e[h+"x"];h=e[h+"y"];d=d.color;if(!d)switch(f("edgeColor")){case "source":d=b.color||f("defaultNodeColor");break;case "target":d=e.color||f("defaultNodeColor");break;default:d=f("defaultEdgeColor")}d=sigma.utils.floatColor(d);a[c++]=k;a[c++]=g;a[c++]=l;a[c++]=h;a[c++]=m;a[c++]=0;a[c++]=d;a[c++]=l;a[c++]=h;a[c++]=k;a[c++]=g;a[c++]=
m;a[c++]=1;a[c++]=d;a[c++]=l;a[c++]=h;a[c++]=k;a[c++]=g;a[c++]=m;a[c++]=0;a[c++]=d;a[c++]=l;a[c++]=h;a[c++]=k;a[c++]=g;a[c++]=m;a[c++]=0;a[c++]=d;a[c++]=k;a[c++]=g;a[c++]=l;a[c++]=h;a[c++]=m;a[c++]=1;a[c++]=d;a[c++]=k;a[c++]=g;a[c++]=l;a[c++]=h;a[c++]=m;a[c++]=0;a[c++]=d},render:function(d,b,e,a){var c=d.getAttribLocation(b,"a_color"),h=d.getAttribLocation(b,"a_position1"),f=d.getAttribLocation(b,"a_position2"),m=d.getAttribLocation(b,"a_thickness"),k=d.getAttribLocation(b,"a_minus"),g=d.getUniformLocation(b,
"u_resolution"),l=d.getUniformLocation(b,"u_matrix"),n=d.getUniformLocation(b,"u_matrixHalfPi"),q=d.getUniformLocation(b,"u_matrixHalfPiMinus"),p=d.getUniformLocation(b,"u_ratio"),t=d.getUniformLocation(b,"u_scale");b=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,b);d.bufferData(d.ARRAY_BUFFER,e,d.STATIC_DRAW);d.uniform2f(g,a.width,a.height);d.uniform1f(p,a.ratio/Math.pow(a.ratio,a.settings("edgesPowRatio")));d.uniform1f(t,a.scalingRatio);d.uniformMatrix3fv(l,!1,a.matrix);d.uniformMatrix2fv(n,!1,sigma.utils.matrices.rotation(Math.PI/
2,!0));d.uniformMatrix2fv(q,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0));d.enableVertexAttribArray(c);d.enableVertexAttribArray(h);d.enableVertexAttribArray(f);d.enableVertexAttribArray(m);d.enableVertexAttribArray(k);d.vertexAttribPointer(h,2,d.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0);d.vertexAttribPointer(f,2,d.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8);d.vertexAttribPointer(m,1,d.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16);d.vertexAttribPointer(k,
1,d.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20);d.vertexAttribPointer(c,1,d.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24);d.drawArrays(d.TRIANGLES,a.start||0,a.count||e.length/this.ATTRIBUTES)},initProgram:function(d){var b=sigma.utils.loadShader(d,"attribute vec2 a_position1;\nattribute vec2 a_position2;\nattribute float a_thickness;\nattribute float a_minus;\nattribute float a_color;\nuniform vec2 u_resolution;\nuniform float u_ratio;\nuniform float u_scale;\nuniform mat3 u_matrix;\nuniform mat2 u_matrixHalfPi;\nuniform mat2 u_matrixHalfPiMinus;\nvarying vec4 color;\nvoid main() {\nvec2 position \x3d a_thickness * u_ratio *\nnormalize(a_position2 - a_position1);\nmat2 matrix \x3d a_minus * u_matrixHalfPiMinus +\n(1.0 - a_minus) * u_matrixHalfPi;\nposition \x3d matrix * position + a_position1;\ngl_Position \x3d vec4(\n((u_matrix * vec3(position, 1)).xy /\nu_resolution * 2.0 - 1.0) * vec2(1, -1),\n0,\n1\n);\nfloat c \x3d a_color;\ncolor.b \x3d mod(c, 256.0); c \x3d floor(c / 256.0);\ncolor.g \x3d mod(c, 256.0); c \x3d floor(c / 256.0);\ncolor.r \x3d mod(c, 256.0); c \x3d floor(c / 256.0); color /\x3d 255.0;\ncolor.a \x3d 1.0;\n}",
d.VERTEX_SHADER);var e=sigma.utils.loadShader(d,"precision mediump float;\nvarying vec4 color;\nvoid main(void) {\ngl_FragColor \x3d color;\n}",d.FRAGMENT_SHADER);return sigma.utils.loadProgram(d,[b,e])}}})();
(function(){sigma.utils.pkg("sigma.webgl.edges");sigma.webgl.edges.fast={POINTS:2,ATTRIBUTES:3,addEdge:function(d,b,e,a,c,h,f){var m=b[h+"x"],k=b[h+"y"],g=e[h+"x"];h=e[h+"y"];d=d.color;if(!d)switch(f("edgeColor")){case "source":d=b.color||f("defaultNodeColor");break;case "target":d=e.color||f("defaultNodeColor");break;default:d=f("defaultEdgeColor")}d=sigma.utils.floatColor(d);a[c++]=m;a[c++]=k;a[c++]=d;a[c++]=g;a[c++]=h;a[c++]=d},render:function(d,b,e,a){var c=d.getAttribLocation(b,"a_color"),h=
d.getAttribLocation(b,"a_position"),f=d.getUniformLocation(b,"u_resolution"),m=d.getUniformLocation(b,"u_matrix");b=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,b);d.bufferData(d.ARRAY_BUFFER,e,d.DYNAMIC_DRAW);d.uniform2f(f,a.width,a.height);d.uniformMatrix3fv(m,!1,a.matrix);d.enableVertexAttribArray(h);d.enableVertexAttribArray(c);d.vertexAttribPointer(h,2,d.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0);d.vertexAttribPointer(c,1,d.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,
8);d.lineWidth(3);d.drawArrays(d.LINES,a.start||0,a.count||e.length/this.ATTRIBUTES)},initProgram:function(d){var b=sigma.utils.loadShader(d,"attribute vec2 a_position;\nattribute float a_color;\nuniform vec2 u_resolution;\nuniform mat3 u_matrix;\nvarying vec4 color;\nvoid main() {\ngl_Position \x3d vec4(\n((u_matrix * vec3(a_position, 1)).xy /\nu_resolution * 2.0 - 1.0) * vec2(1, -1),\n0,\n1\n);\nfloat c \x3d a_color;\ncolor.b \x3d mod(c, 256.0); c \x3d floor(c / 256.0);\ncolor.g \x3d mod(c, 256.0); c \x3d floor(c / 256.0);\ncolor.r \x3d mod(c, 256.0); c \x3d floor(c / 256.0); color /\x3d 255.0;\ncolor.a \x3d 1.0;\n}",
d.VERTEX_SHADER);var e=sigma.utils.loadShader(d,"precision mediump float;\nvarying vec4 color;\nvoid main(void) {\ngl_FragColor \x3d color;\n}",d.FRAGMENT_SHADER);return sigma.utils.loadProgram(d,[b,e])}}})();
(function(){sigma.utils.pkg("sigma.webgl.edges");sigma.webgl.edges.arrow={POINTS:9,ATTRIBUTES:11,addEdge:function(d,b,e,a,c,h,f){var m=(d[h+"size"]||1)/2,k=b[h+"x"],g=b[h+"y"],l=e[h+"x"],n=e[h+"y"];h=e[h+"size"];d=d.color;if(!d)switch(f("edgeColor")){case "source":d=b.color||f("defaultNodeColor");break;case "target":d=e.color||f("defaultNodeColor");break;default:d=f("defaultEdgeColor")}d=sigma.utils.floatColor(d);a[c++]=k;a[c++]=g;a[c++]=l;a[c++]=n;a[c++]=m;a[c++]=h;a[c++]=0;a[c++]=0;a[c++]=0;a[c++]=
0;a[c++]=d;a[c++]=l;a[c++]=n;a[c++]=k;a[c++]=g;a[c++]=m;a[c++]=h;a[c++]=1;a[c++]=1;a[c++]=0;a[c++]=0;a[c++]=d;a[c++]=l;a[c++]=n;a[c++]=k;a[c++]=g;a[c++]=m;a[c++]=h;a[c++]=1;a[c++]=0;a[c++]=0;a[c++]=0;a[c++]=d;a[c++]=l;a[c++]=n;a[c++]=k;a[c++]=g;a[c++]=m;a[c++]=h;a[c++]=1;a[c++]=0;a[c++]=0;a[c++]=0;a[c++]=d;a[c++]=k;a[c++]=g;a[c++]=l;a[c++]=n;a[c++]=m;a[c++]=h;a[c++]=0;a[c++]=1;a[c++]=0;a[c++]=0;a[c++]=d;a[c++]=k;a[c++]=g;a[c++]=l;a[c++]=n;a[c++]=m;a[c++]=h;a[c++]=0;a[c++]=0;a[c++]=0;a[c++]=0;a[c++]=
d;a[c++]=l;a[c++]=n;a[c++]=k;a[c++]=g;a[c++]=m;a[c++]=h;a[c++]=1;a[c++]=0;a[c++]=1;a[c++]=-1;a[c++]=d;a[c++]=l;a[c++]=n;a[c++]=k;a[c++]=g;a[c++]=m;a[c++]=h;a[c++]=1;a[c++]=0;a[c++]=1;a[c++]=0;a[c++]=d;a[c++]=l;a[c++]=n;a[c++]=k;a[c++]=g;a[c++]=m;a[c++]=h;a[c++]=1;a[c++]=0;a[c++]=1;a[c++]=1;a[c++]=d},render:function(d,b,e,a){var c=d.getAttribLocation(b,"a_pos1"),h=d.getAttribLocation(b,"a_pos2"),f=d.getAttribLocation(b,"a_thickness"),m=d.getAttribLocation(b,"a_tSize"),k=d.getAttribLocation(b,"a_delay"),
g=d.getAttribLocation(b,"a_minus"),l=d.getAttribLocation(b,"a_head"),n=d.getAttribLocation(b,"a_headPosition"),q=d.getAttribLocation(b,"a_color"),p=d.getUniformLocation(b,"u_resolution"),t=d.getUniformLocation(b,"u_matrix"),u=d.getUniformLocation(b,"u_matrixHalfPi"),v=d.getUniformLocation(b,"u_matrixHalfPiMinus"),r=d.getUniformLocation(b,"u_ratio"),w=d.getUniformLocation(b,"u_nodeRatio"),y=d.getUniformLocation(b,"u_arrowHead"),x=d.getUniformLocation(b,"u_scale");b=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,
b);d.bufferData(d.ARRAY_BUFFER,e,d.STATIC_DRAW);d.uniform2f(p,a.width,a.height);d.uniform1f(r,a.ratio/Math.pow(a.ratio,a.settings("edgesPowRatio")));d.uniform1f(w,Math.pow(a.ratio,a.settings("nodesPowRatio"))/a.ratio);d.uniform1f(y,5);d.uniform1f(x,a.scalingRatio);d.uniformMatrix3fv(t,!1,a.matrix);d.uniformMatrix2fv(u,!1,sigma.utils.matrices.rotation(Math.PI/2,!0));d.uniformMatrix2fv(v,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0));d.enableVertexAttribArray(c);d.enableVertexAttribArray(h);d.enableVertexAttribArray(f);
d.enableVertexAttribArray(m);d.enableVertexAttribArray(k);d.enableVertexAttribArray(g);d.enableVertexAttribArray(l);d.enableVertexAttribArray(n);d.enableVertexAttribArray(q);d.vertexAttribPointer(c,2,d.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0);d.vertexAttribPointer(h,2,d.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8);d.vertexAttribPointer(f,1,d.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16);d.vertexAttribPointer(m,1,d.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,
20);d.vertexAttribPointer(k,1,d.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24);d.vertexAttribPointer(g,1,d.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,28);d.vertexAttribPointer(l,1,d.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,32);d.vertexAttribPointer(n,1,d.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,36);d.vertexAttribPointer(q,1,d.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,40);d.drawArrays(d.TRIANGLES,a.start||0,a.count||e.length/this.ATTRIBUTES)},
initProgram:function(d){var b=sigma.utils.loadShader(d,"attribute vec2 a_pos1;\nattribute vec2 a_pos2;\nattribute float a_thickness;\nattribute float a_tSize;\nattribute float a_delay;\nattribute float a_minus;\nattribute float a_head;\nattribute float a_headPosition;\nattribute float a_color;\nuniform vec2 u_resolution;\nuniform float u_ratio;\nuniform float u_nodeRatio;\nuniform float u_arrowHead;\nuniform float u_scale;\nuniform mat3 u_matrix;\nuniform mat2 u_matrixHalfPi;\nuniform mat2 u_matrixHalfPiMinus;\nvarying vec4 color;\nvoid main() {\nvec2 pos \x3d normalize(a_pos2 - a_pos1);\nmat2 matrix \x3d (1.0 - a_head) *\n(\na_minus * u_matrixHalfPiMinus +\n(1.0 - a_minus) * u_matrixHalfPi\n) + a_head * (\na_headPosition * u_matrixHalfPiMinus * 0.6 +\n(a_headPosition * a_headPosition - 1.0) * mat2(1.0)\n);\npos \x3d a_pos1 + (\n(1.0 - a_head) * a_thickness * u_ratio * matrix * pos +\na_head * u_arrowHead * a_thickness * u_ratio * matrix * pos +\na_delay * pos * (\na_tSize / u_nodeRatio +\nu_arrowHead * a_thickness * u_ratio\n)\n);\ngl_Position \x3d vec4(\n((u_matrix * vec3(pos, 1)).xy /\nu_resolution * 2.0 - 1.0) * vec2(1, -1),\n0,\n1\n);\nfloat c \x3d a_color;\ncolor.b \x3d mod(c, 256.0); c \x3d floor(c / 256.0);\ncolor.g \x3d mod(c, 256.0); c \x3d floor(c / 256.0);\ncolor.r \x3d mod(c, 256.0); c \x3d floor(c / 256.0); color /\x3d 255.0;\ncolor.a \x3d 1.0;\n}",
d.VERTEX_SHADER);var e=sigma.utils.loadShader(d,"precision mediump float;\nvarying vec4 color;\nvoid main(void) {\ngl_FragColor \x3d color;\n}",d.FRAGMENT_SHADER);return sigma.utils.loadProgram(d,[b,e])}}})();
(function(d){if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.labels");sigma.canvas.labels.def=function(b,d,a){var c=a("prefix")||"",e=b[c+"size"];if(!(e<a("labelThreshold"))&&b.label&&"string"===typeof b.label){var f="fixed"===a("labelSize")?a("defaultLabelSize"):a("labelSizeRatio")*e;d.font=(a("fontStyle")?a("fontStyle")+" ":"")+f+"px "+a("font");d.fillStyle="node"===a("labelColor")?b.color||a("defaultNodeColor"):a("defaultLabelColor");d.fillText(b.label,
Math.round(b[c+"x"]+e+3),Math.round(b[c+"y"]+f/3))}}}).call(this);
(function(d){if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.hovers");sigma.canvas.hovers.def=function(b,d,a){var c=a("hoverFontStyle")||a("fontStyle");var e=a("prefix")||"",f=b[e+"size"],m="fixed"===a("labelSize")?a("defaultLabelSize"):a("labelSizeRatio")*f;d.font=(c?c+" ":"")+m+"px "+(a("hoverFont")||a("font"));d.beginPath();d.fillStyle="node"===a("labelHoverBGColor")?b.color||a("defaultNodeColor"):a("defaultHoverLabelBGColor");b.label&&a("labelHoverShadow")&&
(d.shadowOffsetX=0,d.shadowOffsetY=0,d.shadowBlur=8,d.shadowColor=a("labelHoverShadowColor"));if(b.label&&"string"===typeof b.label){c=Math.round(b[e+"x"]-m/2-2);var k=Math.round(b[e+"y"]-m/2-2);var g=Math.round(d.measureText(b.label).width+m/2+f+7);var l=Math.round(m+4);var n=Math.round(m/2+2);d.moveTo(c,k+n);d.arcTo(c,k,c+n,k,n);d.lineTo(c+g,k);d.lineTo(c+g,k+l);d.lineTo(c+n,k+l);d.arcTo(c,k+l,c,k+l-n,n);d.lineTo(c,k+n);d.closePath();d.fill();d.shadowOffsetX=0;d.shadowOffsetY=0;d.shadowBlur=0}0<
a("borderSize")&&(d.beginPath(),d.fillStyle="node"===a("nodeBorderColor")?b.color||a("defaultNodeColor"):a("defaultNodeBorderColor"),d.arc(b[e+"x"],b[e+"y"],f+a("borderSize"),0,2*Math.PI,!0),d.closePath(),d.fill());(sigma.canvas.nodes[b.type]||sigma.canvas.nodes.def)(b,d,a);b.label&&"string"===typeof b.label&&(d.fillStyle="node"===a("labelHoverColor")?b.color||a("defaultNodeColor"):a("defaultLabelHoverColor"),d.fillText(b.label,Math.round(b[e+"x"]+f+3),Math.round(b[e+"y"]+m/3)))}}).call(this);
(function(){sigma.utils.pkg("sigma.canvas.nodes");sigma.canvas.nodes.def=function(d,b,e){var a=e("prefix")||"";b.fillStyle=d.color||e("defaultNodeColor");b.beginPath();b.arc(d[a+"x"],d[a+"y"],d[a+"size"],0,2*Math.PI,!0);b.closePath();b.fill()}})();
(function(){sigma.utils.pkg("sigma.canvas.edges");sigma.canvas.edges.def=function(d,b,e,a,c){var h=d.color,f=c("prefix")||"";d=d[f+"size"]||1;var m=c("edgeColor"),k=c("defaultNodeColor");c=c("defaultEdgeColor");if(!h)switch(m){case "source":h=b.color||k;break;case "target":h=e.color||k;break;default:h=c}a.strokeStyle=h;a.lineWidth=d;a.beginPath();a.moveTo(b[f+"x"],b[f+"y"]);a.lineTo(e[f+"x"],e[f+"y"]);a.stroke()}})();
(function(){sigma.utils.pkg("sigma.canvas.edges");sigma.canvas.edges.curve=function(d,b,e,a,c){var h=d.color,f=c("prefix")||"";d=d[f+"size"]||1;var m=c("edgeColor"),k=c("defaultNodeColor");c=c("defaultEdgeColor");var g=b[f+"size"];var l=b[f+"x"],n=b[f+"y"],q=e[f+"x"];f=e[f+"y"];g=b.id===e.id?sigma.utils.getSelfLoopControlPoints(l,n,g):sigma.utils.getQuadraticControlPoint(l,n,q,f);if(!h)switch(m){case "source":h=b.color||k;break;case "target":h=e.color||k;break;default:h=c}a.strokeStyle=h;a.lineWidth=
d;a.beginPath();a.moveTo(l,n);b.id===e.id?a.bezierCurveTo(g.x1,g.y1,g.x2,g.y2,q,f):a.quadraticCurveTo(g.x,g.y,q,f);a.stroke()}})();
(function(){sigma.utils.pkg("sigma.canvas.edges");sigma.canvas.edges.arrow=function(d,b,e,a,c){var h=d.color,f=c("prefix")||"",m=c("edgeColor"),k=c("defaultNodeColor"),g=c("defaultEdgeColor");d=d[f+"size"]||1;var l=e[f+"size"],n=b[f+"x"],q=b[f+"y"],p=e[f+"x"];f=e[f+"y"];var t=Math.max(2.5*d,c("minArrowSize")),u=Math.sqrt(Math.pow(p-n,2)+Math.pow(f-q,2));c=n+(p-n)*(u-t-l)/u;l=q+(f-q)*(u-t-l)/u;p=(p-n)*t/u;f=(f-q)*t/u;if(!h)switch(m){case "source":h=b.color||k;break;case "target":h=e.color||k;break;
default:h=g}a.strokeStyle=h;a.lineWidth=d;a.beginPath();a.moveTo(n,q);a.lineTo(c,l);a.stroke();a.fillStyle=h;a.beginPath();a.moveTo(c+p,l+f);a.lineTo(c+.6*f,l-.6*p);a.lineTo(c-.6*f,l+.6*p);a.lineTo(c+p,l+f);a.closePath();a.fill()}})();
(function(){sigma.utils.pkg("sigma.canvas.edges");sigma.canvas.edges.curvedArrow=function(d,b,e,a,c){var h=d.color,f=c("prefix")||"",m=c("edgeColor"),k=c("defaultNodeColor"),g=c("defaultEdgeColor");d=d[f+"size"]||1;var l=e[f+"size"],n=b[f+"x"],q=b[f+"y"],p=e[f+"x"];f=e[f+"y"];var t=Math.max(2.5*d,c("minArrowSize"));c=b.id===e.id?sigma.utils.getSelfLoopControlPoints(n,q,l):sigma.utils.getQuadraticControlPoint(n,q,p,f);if(b.id===e.id){var u=Math.sqrt(Math.pow(p-c.x1,2)+Math.pow(f-c.y1,2));var v=c.x1+
(p-c.x1)*(u-t-l)/u;l=c.y1+(f-c.y1)*(u-t-l)/u;p=(p-c.x1)*t/u;f=(f-c.y1)*t/u}else u=Math.sqrt(Math.pow(p-c.x,2)+Math.pow(f-c.y,2)),v=c.x+(p-c.x)*(u-t-l)/u,l=c.y+(f-c.y)*(u-t-l)/u,p=(p-c.x)*t/u,f=(f-c.y)*t/u;if(!h)switch(m){case "source":h=b.color||k;break;case "target":h=e.color||k;break;default:h=g}a.strokeStyle=h;a.lineWidth=d;a.beginPath();a.moveTo(n,q);b.id===e.id?a.bezierCurveTo(c.x2,c.y2,c.x1,c.y1,v,l):a.quadraticCurveTo(c.x,c.y,v,l);a.stroke();a.fillStyle=h;a.beginPath();a.moveTo(v+p,l+f);a.lineTo(v+
.6*f,l-.6*p);a.lineTo(v-.6*f,l+.6*p);a.lineTo(v+p,l+f);a.closePath();a.fill()}})();
(function(){sigma.utils.pkg("sigma.canvas.edgehovers");sigma.canvas.edgehovers.def=function(d,b,e,a,c){var h=d.color,f=c("prefix")||"",m=d[f+"size"]||1,k=c("edgeColor"),g=c("defaultNodeColor"),l=c("defaultEdgeColor");if(!h)switch(k){case "source":h=b.color||g;break;case "target":h=e.color||g;break;default:h=l}h="edge"===c("edgeHoverColor")?d.hover_color||h:d.hover_color||c("defaultEdgeHoverColor")||h;m*=c("edgeHoverSizeRatio");a.strokeStyle=h;a.lineWidth=m;a.beginPath();a.moveTo(b[f+"x"],b[f+"y"]);
a.lineTo(e[f+"x"],e[f+"y"]);a.stroke()}})();
(function(){sigma.utils.pkg("sigma.canvas.edgehovers");sigma.canvas.edgehovers.curve=function(d,b,e,a,c){var h=d.color,f=c("prefix")||"",m=c("edgeHoverSizeRatio")*(d[f+"size"]||1),k=c("edgeColor"),g=c("defaultNodeColor"),l=c("defaultEdgeColor");var n=b[f+"size"];var q=b[f+"x"],p=b[f+"y"],t=e[f+"x"];f=e[f+"y"];n=b.id===e.id?sigma.utils.getSelfLoopControlPoints(q,p,n):sigma.utils.getQuadraticControlPoint(q,p,t,f);if(!h)switch(k){case "source":h=b.color||g;break;case "target":h=e.color||g;break;default:h=
l}h="edge"===c("edgeHoverColor")?d.hover_color||h:d.hover_color||c("defaultEdgeHoverColor")||h;a.strokeStyle=h;a.lineWidth=m;a.beginPath();a.moveTo(q,p);b.id===e.id?a.bezierCurveTo(n.x1,n.y1,n.x2,n.y2,t,f):a.quadraticCurveTo(n.x,n.y,t,f);a.stroke()}})();
(function(){sigma.utils.pkg("sigma.canvas.edgehovers");sigma.canvas.edgehovers.arrow=function(d,b,e,a,c){var h=d.color,f=c("prefix")||"",m=c("edgeColor"),k=c("defaultNodeColor"),g=c("defaultEdgeColor"),l=d[f+"size"]||1,n=e[f+"size"],q=b[f+"x"],p=b[f+"y"],t=e[f+"x"],u=e[f+"y"];l=d.hover?c("edgeHoverSizeRatio")*l:l;var v=2.5*l,r=Math.sqrt(Math.pow(t-q,2)+Math.pow(u-p,2));f=q+(t-q)*(r-v-n)/r;n=p+(u-p)*(r-v-n)/r;t=(t-q)*v/r;u=(u-p)*v/r;if(!h)switch(m){case "source":h=b.color||k;break;case "target":h=
e.color||k;break;default:h=g}h="edge"===c("edgeHoverColor")?d.hover_color||h:d.hover_color||c("defaultEdgeHoverColor")||h;a.strokeStyle=h;a.lineWidth=l;a.beginPath();a.moveTo(q,p);a.lineTo(f,n);a.stroke();a.fillStyle=h;a.beginPath();a.moveTo(f+t,n+u);a.lineTo(f+.6*u,n-.6*t);a.lineTo(f-.6*u,n+.6*t);a.lineTo(f+t,n+u);a.closePath();a.fill()}})();
(function(){sigma.utils.pkg("sigma.canvas.edgehovers");sigma.canvas.edgehovers.curvedArrow=function(d,b,e,a,c){var h=d.color,f=c("prefix")||"",m=c("edgeColor"),k=c("defaultNodeColor"),g=c("defaultEdgeColor"),l=c("edgeHoverSizeRatio")*(d[f+"size"]||1),n=e[f+"size"],q=b[f+"x"],p=b[f+"y"],t=e[f+"x"],u=e[f+"y"];f=b.id===e.id?sigma.utils.getSelfLoopControlPoints(q,p,n):sigma.utils.getQuadraticControlPoint(q,p,t,u);if(b.id===e.id){var v=Math.sqrt(Math.pow(t-f.x1,2)+Math.pow(u-f.y1,2));var r=2.5*l;var w=
f.x1+(t-f.x1)*(v-r-n)/v;n=f.y1+(u-f.y1)*(v-r-n)/v;t=(t-f.x1)*r/v;u=(u-f.y1)*r/v}else v=Math.sqrt(Math.pow(t-f.x,2)+Math.pow(u-f.y,2)),r=2.5*l,w=f.x+(t-f.x)*(v-r-n)/v,n=f.y+(u-f.y)*(v-r-n)/v,t=(t-f.x)*r/v,u=(u-f.y)*r/v;if(!h)switch(m){case "source":h=b.color||k;break;case "target":h=e.color||k;break;default:h=g}h="edge"===c("edgeHoverColor")?d.hover_color||h:d.hover_color||c("defaultEdgeHoverColor")||h;a.strokeStyle=h;a.lineWidth=l;a.beginPath();a.moveTo(q,p);b.id===e.id?a.bezierCurveTo(f.x2,f.y2,
f.x1,f.y1,w,n):a.quadraticCurveTo(f.x,f.y,w,n);a.stroke();a.fillStyle=h;a.beginPath();a.moveTo(w+t,n+u);a.lineTo(w+.6*u,n-.6*t);a.lineTo(w-.6*u,n+.6*t);a.lineTo(w+t,n+u);a.closePath();a.fill()}})();(function(d){if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.extremities");sigma.canvas.extremities.def=function(b,d,a,c,h){(sigma.canvas.hovers[d.type]||sigma.canvas.hovers.def)(d,c,h);(sigma.canvas.hovers[a.type]||sigma.canvas.hovers.def)(a,c,h)}}).call(this);
(function(){sigma.utils.pkg("sigma.svg.utils");sigma.svg.utils={show:function(d){d.style.display="";return this},hide:function(d){d.style.display="none";return this}}})();
(function(){sigma.utils.pkg("sigma.svg.nodes");sigma.svg.nodes.def={create:function(d,b){b("prefix");var e=document.createElementNS(b("xmlns"),"circle");e.setAttributeNS(null,"data-node-id",d.id);e.setAttributeNS(null,"class",b("classPrefix")+"-node");e.setAttributeNS(null,"fill",d.color||b("defaultNodeColor"));return e},update:function(d,b,e){var a=e("prefix")||"";b.setAttributeNS(null,"cx",d[a+"x"]);b.setAttributeNS(null,"cy",d[a+"y"]);b.setAttributeNS(null,"r",d[a+"size"]);e("freeStyle")||b.setAttributeNS(null,
"fill",d.color||e("defaultNodeColor"));b.style.display="";return this}}})();
(function(){sigma.utils.pkg("sigma.svg.edges");sigma.svg.edges.def={create:function(d,b,e,a){var c=d.color;a("prefix");var h=a("edgeColor"),f=a("defaultNodeColor"),m=a("defaultEdgeColor");if(!c)switch(h){case "source":c=b.color||f;break;case "target":c=e.color||f;break;default:c=m}b=document.createElementNS(a("xmlns"),"line");b.setAttributeNS(null,"data-edge-id",d.id);b.setAttributeNS(null,"class",a("classPrefix")+"-edge");b.setAttributeNS(null,"stroke",c);return b},update:function(d,b,e,a,c){c=c("prefix")||
"";b.setAttributeNS(null,"stroke-width",d[c+"size"]||1);b.setAttributeNS(null,"x1",e[c+"x"]);b.setAttributeNS(null,"y1",e[c+"y"]);b.setAttributeNS(null,"x2",a[c+"x"]);b.setAttributeNS(null,"y2",a[c+"y"]);b.style.display="";return this}}})();
(function(){sigma.utils.pkg("sigma.svg.edges");sigma.svg.edges.curve={create:function(d,b,e,a){var c=d.color;a("prefix");var h=a("edgeColor"),f=a("defaultNodeColor"),m=a("defaultEdgeColor");if(!c)switch(h){case "source":c=b.color||f;break;case "target":c=e.color||f;break;default:c=m}b=document.createElementNS(a("xmlns"),"path");b.setAttributeNS(null,"data-edge-id",d.id);b.setAttributeNS(null,"class",a("classPrefix")+"-edge");b.setAttributeNS(null,"stroke",c);return b},update:function(d,b,e,a,c){c=
c("prefix")||"";b.setAttributeNS(null,"stroke-width",d[c+"size"]||1);b.setAttributeNS(null,"d","M"+e[c+"x"]+","+e[c+"y"]+" Q"+((e[c+"x"]+a[c+"x"])/2+(a[c+"y"]-e[c+"y"])/4)+","+((e[c+"y"]+a[c+"y"])/2+(e[c+"x"]-a[c+"x"])/4)+" "+a[c+"x"]+","+a[c+"y"]);b.setAttributeNS(null,"fill","none");b.style.display="";return this}}})();
(function(d){if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.svg.labels");sigma.svg.labels.def={create:function(b,d){var a=d("prefix")||"",c=b[a+"size"];a=document.createElementNS(d("xmlns"),"text");c="fixed"===d("labelSize")?d("defaultLabelSize"):d("labelSizeRatio")*c;var e="node"===d("labelColor")?b.color||d("defaultNodeColor"):d("defaultLabelColor");a.setAttributeNS(null,"data-label-target",b.id);a.setAttributeNS(null,"class",d("classPrefix")+"-label");a.setAttributeNS(null,
"font-size",c);a.setAttributeNS(null,"font-family",d("font"));a.setAttributeNS(null,"fill",e);a.innerHTML=b.label;a.textContent=b.label;return a},update:function(b,d,a){var c=a("prefix")||"",e=b[c+"size"],f="fixed"===a("labelSize")?a("defaultLabelSize"):a("labelSizeRatio")*e;if(!(!a("forceLabels")&&e<a("labelThreshold")||"string"!==typeof b.label))return d.setAttributeNS(null,"x",Math.round(b[c+"x"]+e+3)),d.setAttributeNS(null,"y",Math.round(b[c+"y"]+f/3)),d.style.display="",this}}}).call(this);
(function(d){if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.svg.hovers");sigma.svg.hovers.def={create:function(b,d,a,c){c("hoverFontStyle")||c("fontStyle");var e=c("prefix")||"";var f=b[e+"size"];var m="fixed"===c("labelSize")?c("defaultLabelSize"):c("labelSizeRatio")*f;var k="node"===c("labelHoverColor")?b.color||c("defaultNodeColor"):c("defaultLabelHoverColor"),g=document.createElementNS(c("xmlns"),"g"),l=document.createElementNS(c("xmlns"),"rect"),n=document.createElementNS(c("xmlns"),
"circle"),q=document.createElementNS(c("xmlns"),"text");g.setAttributeNS(null,"class",c("classPrefix")+"-hover");g.setAttributeNS(null,"data-node-id",b.id);"string"===typeof b.label&&(q.innerHTML=b.label,q.textContent=b.label,q.setAttributeNS(null,"class",c("classPrefix")+"-hover-label"),q.setAttributeNS(null,"font-size",m),q.setAttributeNS(null,"font-family",c("font")),q.setAttributeNS(null,"fill",k),q.setAttributeNS(null,"x",Math.round(b[e+"x"]+f+3)),q.setAttributeNS(null,"y",Math.round(b[e+"y"]+
m/3)),a=Math.round(a.measureText(b.label).width+m/2+f+9),f=Math.round(m+4),m=Math.round(m/2+2),n.setAttributeNS(null,"class",c("classPrefix")+"-hover-area"),n.setAttributeNS(null,"fill","#fff"),n.setAttributeNS(null,"cx",b[e+"x"]),n.setAttributeNS(null,"cy",b[e+"y"]),n.setAttributeNS(null,"r",m),l.setAttributeNS(null,"class",c("classPrefix")+"-hover-area"),l.setAttributeNS(null,"fill","#fff"),l.setAttributeNS(null,"x",b[e+"x"]+m/4),l.setAttributeNS(null,"y",b[e+"y"]-m),l.setAttributeNS(null,"width",
a),l.setAttributeNS(null,"height",f));g.appendChild(n);g.appendChild(l);g.appendChild(q);g.appendChild(d);return g}}}).call(this);
(function(d){if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares");sigma.utils.pkg("sigma.utils");sigma.middlewares.rescale=function(b,d,a){var c,e=this.graph.nodes(),f=this.graph.edges();var m=this.settings.embedObjects(a||{});var k=m("bounds")||sigma.utils.getBoundaries(this.graph,b,!0);a=k.minX;var g=k.minY,l=k.maxX,n=k.maxY;var q=k.sizeMax;var p=k.weightMax;var t=m("width")||1;var u=m("height")||1,v=m("autoRescale"),r={nodePosition:1,nodeSize:1,edgeSize:1};
v instanceof Array||(v=["nodePosition","nodeSize","edgeSize"]);k=0;for(c=v.length;k<c;k++)if(!r[v[k]])throw Error('The rescale setting "'+v[k]+'" is not recognized.');r=~v.indexOf("nodePosition");var w=~v.indexOf("nodeSize");v=~v.indexOf("edgeSize");var y="outside"===m("scalingMode")?Math.max(t/Math.max(l-a,1),u/Math.max(n-g,1)):Math.min(t/Math.max(l-a,1),u/Math.max(n-g,1));k=(m("rescaleIgnoreSize")?0:(m("maxNodeSize")||q)/y)+(m("sideMargin")||0);l+=k;a-=k;n+=k;g-=k;y="outside"===m("scalingMode")?
Math.max(t/Math.max(l-a,1),u/Math.max(n-g,1)):Math.min(t/Math.max(l-a,1),u/Math.max(n-g,1));m("maxNodeSize")||m("minNodeSize")?m("maxNodeSize")===m("minNodeSize")?(q=0,t=+m("maxNodeSize")):(q=(m("maxNodeSize")-m("minNodeSize"))/q,t=+m("minNodeSize")):(q=1,t=0);m("maxEdgeSize")||m("minEdgeSize")?(p=m("maxEdgeSize")===m("minEdgeSize")?0:(m("maxEdgeSize")-m("minEdgeSize"))/p,m=+m("minEdgeSize")):(p=1,m=0);k=0;for(c=f.length;k<c;k++)f[k][d+"size"]=f[k][b+"size"]*(v?p:1)+(v?m:0);k=0;for(c=e.length;k<c;k++)e[k][d+
"size"]=e[k][b+"size"]*(w?q:1)+(w?t:0),e[k][d+"x"]=(e[k][b+"x"]-(l+a)/2)*(r?y:1),e[k][d+"y"]=(e[k][b+"y"]-(n+g)/2)*(r?y:1)};sigma.utils.getBoundaries=function(b,d,a){var c,e=b.edges();b=b.nodes();var f=-Infinity,m=-Infinity,k=Infinity,g=Infinity,l=-Infinity,n=-Infinity;if(a)for(a=0,c=e.length;a<c;a++)f=Math.max(e[a][d+"size"],f);a=0;for(c=b.length;a<c;a++)m=Math.max(b[a][d+"size"],m),l=Math.max(b[a][d+"x"],l),k=Math.min(b[a][d+"x"],k),n=Math.max(b[a][d+"y"],n),g=Math.min(b[a][d+"y"],g);return{weightMax:f||
1,sizeMax:m||1,minX:k,minY:g,maxX:l,maxY:n}}}).call(this);(function(d){if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares");sigma.middlewares.copy=function(b,d){var a;if(d+""!==b+""){var c=this.graph.nodes();var e=0;for(a=c.length;e<a;e++)c[e][d+"x"]=c[e][b+"x"],c[e][d+"y"]=c[e][b+"y"],c[e][d+"size"]=c[e][b+"size"];c=this.graph.edges();e=0;for(a=c.length;e<a;e++)c[e][d+"size"]=c[e][b+"size"]}}}).call(this);
(function(d){if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc.animation.running");var b=function(){var b=0;return function(){return""+ ++b}}();sigma.misc.animation.camera=function(e,a,c){if(!(e instanceof sigma.classes.camera&&"object"===typeof a&&a))throw"animation.camera: Wrong arguments.";if("number"!==typeof a.x&&"number"!==typeof a.y&&"number"!==typeof a.ratio&&"number"!==typeof a.angle)throw"There must be at least one valid coordinate in the given val.";
var h=c||{},f=sigma.utils.dateNow();var m=e.x;var k=e.y;var g=e.ratio;var l=e.angle;var n="function"!==typeof h.easing?sigma.utils.easings[h.easing||"quadraticInOut"]:h.easing;var q=function(){var b=h.duration?(sigma.utils.dateNow()-f)/h.duration:1;if(1<=b){if(e.isAnimated=!1,e.goTo({x:a.x!==d?a.x:m,y:a.y!==d?a.y:k,ratio:a.ratio!==d?a.ratio:g,angle:a.angle!==d?a.angle:l}),cancelAnimationFrame(p),delete sigma.misc.animation.running[p],"function"===typeof h.onComplete)h.onComplete()}else{b=n(b);e.isAnimated=
!0;e.goTo({x:a.x!==d?m+(a.x-m)*b:m,y:a.y!==d?k+(a.y-k)*b:k,ratio:a.ratio!==d?g+(a.ratio-g)*b:g,angle:a.angle!==d?l+(a.angle-l)*b:l});if("function"===typeof h.onNewFrame)h.onNewFrame();t.frameId=requestAnimationFrame(q)}};var p=b();var t={frameId:requestAnimationFrame(q),target:e,type:"camera",options:h,fn:q};sigma.misc.animation.running[p]=t;return p};sigma.misc.animation.kill=function(b){if(1!==arguments.length||"number"!==typeof b)throw"animation.kill: Wrong arguments.";var a=sigma.misc.animation.running[b];
if(a&&(cancelAnimationFrame(b),delete sigma.misc.animation.running[a.frameId],"camera"===a.type&&(a.target.isAnimated=!1),"function"===typeof(a.options||{}).onComplete))a.options.onComplete();return this};sigma.misc.animation.killAll=function(b){var a,c=0,d="string"===typeof b?b:null,e="object"===typeof b?b:null,m=sigma.misc.animation.running;for(a in m)if(!(d&&m[a].type!==d||e&&m[a].target!==e)&&(b=sigma.misc.animation.running[a],cancelAnimationFrame(b.frameId),delete sigma.misc.animation.running[a],
"camera"===b.type&&(b.target.isAnimated=!1),c++,"function"===typeof(b.options||{}).onComplete))b.options.onComplete();return c};sigma.misc.animation.has=function(b){var a,c="string"===typeof b?b:null;b="object"===typeof b?b:null;var d=sigma.misc.animation.running;for(a in d)if(!(c&&d[a].type!==c||b&&d[a].target!==b))return!0;return!1}}).call(this);
(function(d){if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc");sigma.misc.bindEvents=function(b){function e(a){a&&(f="x"in a.data?a.data.x:f,m="y"in a.data?a.data.y:m);var c;a=[];var d=f+k.width/2,e=m+k.height/2;var g=k.camera.cameraPosition(f,m);var h=k.camera.quadtree.point(g.x,g.y);if(h.length)for(g=0,c=h.length;g<c;g++){var l=h[g];var r=l[b+"x"];var w=l[b+"y"];var y=l[b+"size"];if(!l.hidden&&d>r-y&&d<r+y&&e>w-y&&e<w+y&&Math.sqrt(Math.pow(d-r,2)+Math.pow(e-
w,2))<y){w=!1;for(r=0;r<a.length;r++)if(l.size>a[r].size){a.splice(r,0,l);w=!0;break}w||a.push(l)}}return a}function a(a){function c(a,b){r=!1;for(g=0;g<a.length;g++)if(b.size>a[g].size){a.splice(g,0,b);r=!0;break}r||a.push(b)}if(!k.settings("enableEdgeHovering"))return[];var e=sigma.renderers.canvas&&k instanceof sigma.renderers.canvas;if(!e)throw Error("The edge events feature is not compatible with the WebGL renderer");a&&(f="x"in a.data?a.data.x:f,m="y"in a.data?a.data.y:m);var g,h,l=k.settings("edgeHoverPrecision"),
v={},r,w=[],y=f+k.width/2,x=m+k.height/2;var z=k.camera.cameraPosition(f,m);var B=[];if(e){var A=k.camera.quadtree.area(k.camera.getRectangle(k.width,k.height));a=0;for(h=A.length;a<h;a++)v[A[a].id]=A[a]}k.camera.edgequadtree!==d&&(B=k.camera.edgequadtree.point(z.x,z.y));if(B.length)for(a=0,h=B.length;a<h;a++){A=B[a];var C=k.graph.nodes(A.source);var D=k.graph.nodes(A.target);z=A[b+"size"]||A["read_"+b+"size"];if(!(A.hidden||C.hidden||D.hidden||e&&!v[A.source]&&!v[A.target])&&sigma.utils.getDistance(C[b+
"x"],C[b+"y"],y,x)>C[b+"size"]&&sigma.utils.getDistance(D[b+"x"],D[b+"y"],y,x)>D[b+"size"])if("curve"==A.type||"curvedArrow"==A.type)if(C.id===D.id){var E=sigma.utils.getSelfLoopControlPoints(C[b+"x"],C[b+"y"],C[b+"size"]);sigma.utils.isPointOnBezierCurve(y,x,C[b+"x"],C[b+"y"],D[b+"x"],D[b+"y"],E.x1,E.y1,E.x2,E.y2,Math.max(z,l))&&c(w,A)}else E=sigma.utils.getQuadraticControlPoint(C[b+"x"],C[b+"y"],D[b+"x"],D[b+"y"]),sigma.utils.isPointOnQuadraticCurve(y,x,C[b+"x"],C[b+"y"],D[b+"x"],D[b+"y"],E.x,E.y,
Math.max(z,l))&&c(w,A);else sigma.utils.isPointOnSegment(y,x,C[b+"x"],C[b+"y"],D[b+"x"],D[b+"y"],Math.max(z,l))&&c(w,A)}return w}function c(b){function c(b){if(k.settings("eventsEnabled")){d=e(b);f=a(b);var c,m,l=[],n=[],p={},q=d.length,v=[],t=[],u={},E=f.length;for(c=0;c<q;c++){var F=d[c];p[F.id]=F;g[F.id]||(n.push(F),g[F.id]=F)}for(m in g)p[m]||(l.push(g[m]),delete g[m]);c=0;for(q=n.length;c<q;c++)k.dispatchEvent("overNode",{node:n[c],captor:b.data});c=0;for(q=l.length;c<q;c++)k.dispatchEvent("outNode",
{node:l[c],captor:b.data});n.length&&k.dispatchEvent("overNodes",{nodes:n,captor:b.data});l.length&&k.dispatchEvent("outNodes",{nodes:l,captor:b.data});for(c=0;c<E;c++)F=f[c],u[F.id]=F,h[F.id]||(t.push(F),h[F.id]=F);for(m in h)u[m]||(v.push(h[m]),delete h[m]);c=0;for(E=t.length;c<E;c++)k.dispatchEvent("overEdge",{edge:t[c],captor:b.data});c=0;for(E=v.length;c<E;c++)k.dispatchEvent("outEdge",{edge:v[c],captor:b.data});t.length&&k.dispatchEvent("overEdges",{edges:t,captor:b.data});v.length&&k.dispatchEvent("outEdges",
{edges:v,captor:b.data})}}var d,f,g={},h={};b.bind("click",function(b){k.settings("eventsEnabled")&&(k.dispatchEvent("click",b.data),d=e(b),f=a(b),d.length?(k.dispatchEvent("clickNode",{node:d[0],captor:b.data}),k.dispatchEvent("clickNodes",{node:d,captor:b.data})):f.length?(k.dispatchEvent("clickEdge",{edge:f[0],captor:b.data}),k.dispatchEvent("clickEdges",{edge:f,captor:b.data})):k.dispatchEvent("clickStage",{captor:b.data}))});b.bind("mousedown",c);b.bind("mouseup",c);b.bind("mousemove",c);b.bind("mouseout",
function(a){if(k.settings("eventsEnabled")){var b;var c=[];var d=[];for(e in g)c.push(g[e]);g={};var e=0;for(b=c.length;e<b;e++)k.dispatchEvent("outNode",{node:c[e],captor:a.data});c.length&&k.dispatchEvent("outNodes",{nodes:c,captor:a.data});h={};e=0;for(c=d.length;e<c;e++)k.dispatchEvent("outEdge",{edge:d[e],captor:a.data});d.length&&k.dispatchEvent("outEdges",{edges:d,captor:a.data})}});b.bind("doubleclick",function(b){k.settings("eventsEnabled")&&(k.dispatchEvent("doubleClick",b.data),d=e(b),
f=a(b),d.length?(k.dispatchEvent("doubleClickNode",{node:d[0],captor:b.data}),k.dispatchEvent("doubleClickNodes",{node:d,captor:b.data})):f.length?(k.dispatchEvent("doubleClickEdge",{edge:f[0],captor:b.data}),k.dispatchEvent("doubleClickEdges",{edge:f,captor:b.data})):k.dispatchEvent("doubleClickStage",{captor:b.data}))});b.bind("rightclick",function(b){k.settings("eventsEnabled")&&(k.dispatchEvent("rightClick",b.data),d=e(b),f=a(b),d.length?(k.dispatchEvent("rightClickNode",{node:d[0],captor:b.data}),
k.dispatchEvent("rightClickNodes",{node:d,captor:b.data})):f.length?(k.dispatchEvent("rightClickEdge",{edge:f[0],captor:b.data}),k.dispatchEvent("rightClickEdges",{edge:f,captor:b.data})):k.dispatchEvent("rightClickStage",{captor:b.data}))});k.bind("render",c)}var h,f,m,k=this;var g=0;for(h=this.captors.length;g<h;g++)c(this.captors[g])}}).call(this);
(function(d){if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc");sigma.misc.bindDOMEvents=function(b){function d(a){this.attr=function(b){return a.getAttributeNS(null,b)};this.tag=a.tagName;this.class=this.attr("class");this.id=this.attr("id");this.isNode=function(){return!!~this.class.indexOf(h.settings("classPrefix")+"-node")};this.isEdge=function(){return!!~this.class.indexOf(h.settings("classPrefix")+"-edge")};this.isHover=function(){return!!~this.class.indexOf(h.settings("classPrefix")+
"-hover")}}function a(a){if(h.settings("eventsEnabled")){h.dispatchEvent("click",a);var b=new d(a.target);b.isNode()?h.dispatchEvent("clickNode",{node:f.nodes(b.attr("data-node-id"))}):h.dispatchEvent("clickStage");a.preventDefault();a.stopPropagation()}}function c(a){if(h.settings("eventsEnabled")){h.dispatchEvent("doubleClick",a);var b=new d(a.target);b.isNode()?h.dispatchEvent("doubleClickNode",{node:f.nodes(b.attr("data-node-id"))}):h.dispatchEvent("doubleClickStage");a.preventDefault();a.stopPropagation()}}
var h=this,f=this.graph;b.addEventListener("click",a,!1);sigma.utils.doubleClick(b,"click",c);b.addEventListener("touchstart",a,!1);sigma.utils.doubleClick(b,"touchstart",c);b.addEventListener("mouseover",function(a){a=a.toElement||a.target;h.settings("eventsEnabled")&&a&&(a=new d(a),a.isNode()?h.dispatchEvent("overNode",{node:f.nodes(a.attr("data-node-id"))}):a.isEdge()&&(a=f.edges(a.attr("data-edge-id")),h.dispatchEvent("overEdge",{edge:a,source:f.nodes(a.source),target:f.nodes(a.target)})))},!0);
b.addEventListener("mouseout",function(a){a=a.fromElement||a.originalTarget;h.settings("eventsEnabled")&&(a=new d(a),a.isNode()?h.dispatchEvent("outNode",{node:f.nodes(a.attr("data-node-id"))}):a.isEdge()&&(a=f.edges(a.attr("data-edge-id")),h.dispatchEvent("outEdge",{edge:a,source:f.nodes(a.source),target:f.nodes(a.target)})))},!0)}}).call(this);
(function(d){if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc");sigma.misc.drawHovers=function(b){function d(){var d;var e=a.contexts.hover.canvas;var k=a.settings("defaultNodeType");var g=a.settings("defaultEdgeType");var l=sigma.canvas.hovers;var n=sigma.canvas.edgehovers,q=sigma.canvas.extremities,p=a.settings.embedObjects({prefix:b});a.contexts.hover.clearRect(0,0,e.width,e.height);p("enableHovering")&&p("singleHover")&&Object.keys(c).length&&(e=c[Object.keys(c)[0]],
(l[e.type]||l[k]||l.def)(e,a.contexts.hover,p));if(p("enableHovering")&&!p("singleHover"))for(d in c)(l[c[d].type]||l[k]||l.def)(c[d],a.contexts.hover,p);p("enableEdgeHovering")&&p("singleHover")&&Object.keys(h).length&&(e=h[Object.keys(h)[0]],k=a.graph.nodes(e.source),l=a.graph.nodes(e.target),e.hidden||((n[e.type]||n[g]||n.def)(e,k,l,a.contexts.hover,p),p("edgeHoverExtremities")?(q[e.type]||q.def)(e,k,l,a.contexts.hover,p):((sigma.canvas.nodes[k.type]||sigma.canvas.nodes.def)(k,a.contexts.hover,
p),(sigma.canvas.nodes[l.type]||sigma.canvas.nodes.def)(l,a.contexts.hover,p))));if(p("enableEdgeHovering")&&!p("singleHover"))for(d in h)e=h[d],k=a.graph.nodes(e.source),l=a.graph.nodes(e.target),e.hidden||((n[e.type]||n[g]||n.def)(e,k,l,a.contexts.hover,p),p("edgeHoverExtremities")?(q[e.type]||q.def)(e,k,l,a.contexts.hover,p):((sigma.canvas.nodes[k.type]||sigma.canvas.nodes.def)(k,a.contexts.hover,p),(sigma.canvas.nodes[l.type]||sigma.canvas.nodes.def)(l,a.contexts.hover,p)))}var a=this,c={},h=
{};this.bind("overNode",function(a){a=a.data.node;a.hidden||(c[a.id]=a,d())});this.bind("outNode",function(a){delete c[a.data.node.id];d()});this.bind("overEdge",function(a){a=a.data.edge;a.hidden||(h[a.id]=a,d())});this.bind("outEdge",function(a){delete h[a.data.edge.id];d()});this.bind("render",function(a){d()})}}).call(this);