'use strict';(function(){function g(a){a=a.toUpperCase().charCodeAt(0);return 65<=a&&90>=a?Math.ceil((a-64)/9):null}function u(){if(!document.getElementById("price-moves-style")){var a=document.createElement("style");a.id="price-moves-style";a.textContent="\n  .price-moves-container {\n    display: flex;\n    height: 100px;\n    width: 75%;\n    margin: 0 auto;\n    background-color: #fff;\n    border: 1px solid #ccc;\n    overflow-x: auto;\n    overflow-y: visible;\n    position: relative;\n    scroll-behavior: smooth;\n\tz-index:1;\n    /* Discrete/minimal scrollbar styling */\n    scrollbar-width: thin;\n    scrollbar-color: #ccc transparent;\n  }\n  .price-moves-container::-webkit-scrollbar {\n    height: 6px;\n  }\n  .price-moves-container::-webkit-scrollbar-track {\n    background: transparent;\n  }\n  .price-moves-container::-webkit-scrollbar-thumb {\n    background-color: #ccc;\n    border-radius: 3px;\n  }\n  .price-moves-container::-webkit-scrollbar-thumb:hover {\n    background-color: #999;\n  }\n    .center-line {\n      position: absolute;\n      top: 50%;\n      left: 0;\n      width: 100%;\n      height: 1px;\n      background-color: #ccc;\n      z-index: 0;\n    }\n    .date-column {\n      position: relative;\n      width: 60px;\n      height: 100px;\n      flex-shrink: 0;\n      z-index: 1;\n    }\n    .date-label {\n      position: absolute;\n      top: 2px;\n      left: 35%;\n      transform: translateX(-50%);\n      font-size: 10px;\n      color: #555;\n      background: #fff;\n      padding: 2px 4px;\n      border-radius: 4px;\n      z-index: 1;\n    }\n    .evt-dot {\n      position: absolute;\n      border-radius: 50%;\n      cursor: pointer;\n      transition: transform 0.2s ease;\n      z-index: 1;\n    }\n    .price-tooltip {\n      position: fixed;\n      background: #333;\n      color: #fff;\n      padding: 4px 8px;\n      font-size: 12px;\n      white-space: nowrap;\n      border-radius: 4px;\n      pointer-events: none;\n      z-index: 99999;\n      opacity: 0;\n      transition: opacity 0.2s;\n    }\n    .price-tooltip.visible {\n      opacity: 1;\n    }\n\t.friday-column {\n\t  position: relative;\n\t}\n\n\t.friday-column::after {\n\t  content: '';\n\t  position: absolute;\n\t  top: 20%;              /* skip top 20% */\n\t  bottom: 20%;           /* skip bottom 20% */\n\t  right: 0;\n\t  width: 2px;\n\t  background-color: #aaa; /* or any color you like */\n\t}\n  ";
document.head.appendChild(a)}}function n(){h||(h=document.createElement("div"),h.className="price-tooltip",document.body.appendChild(h));return h}function v(a,c){const b=n();b.textContent=c;b.classList.add("visible");a=a.currentTarget;c=a.getBoundingClientRect();const d=b.getBoundingClientRect();let e=c.left+c.width/2-d.width/2,f=c.top-d.height-8;5>e&&(e=5);e+d.width>window.innerWidth-5&&(e=window.innerWidth-d.width-5);5>f&&(f=c.bottom+8);b.style.left=`${e}px`;b.style.top=`${f}px`;a=window.getComputedStyle(a).backgroundColor;
b.style.backgroundColor=a}function w(a){return a.reduce((a,b)=>{a[b.dateString]=a[b.dateString]||[];a[b.dateString].push(b);return a},{})}function p(a){a=[11,12,13,21,22,23,31,32,33].indexOf(a);return-1!==a?x[a]:null}function q(a,c){const b=document.createElement("div");b.className="evt-dot "+(0<=a.change?"up":"down");var d=100<=Math.abs(a.change);const e=`${a.ticker}: ${a.price.toFixed(0)} (${a.change.toFixed(0)}%${d?"!":""})`;let f=null,l=!1;b.addEventListener("mouseenter",b=>{v(b,e);f=setTimeout(()=>
{r(a.ticker,!0);l=!0},1E3)});b.addEventListener("mouseleave",()=>{n().classList.remove("visible");l&&(r(a.ticker,!1),l=!1);clearTimeout(f)});d=2;50<=a.price&&300>a.price?d=5:300<=a.price&&500>a.price?d=8:500<=a.price&&(d=11);b.style.width=`${d}px`;b.style.height=`${d}px`;d=c/2-d/2-2;d=Math.min(d/50*Math.abs(Math.max(-100,Math.min(100,a.change))),d);b.style.top=`${0<a.change?c/2-d:c/2+d}px`;b.style.transform="translateX(-50%)";b.setAttribute("data-ticker",a.ticker);c=g(a.ticker.charAt(0));d=g(a.ticker.charAt(1));
b.style.backgroundColor=p(10*parseInt(c)+parseInt(d));return b}function r(a,c){document.querySelectorAll(".dot").forEach(b=>{const d=g(a.charAt(0)||""),e=g(a.charAt(1)||""),f=g(b.textContent.charAt(0)||""),l=g(b.textContent.charAt(1)||"");b.style.display=d==f&&e==l?c?"block":"none":c?"none":"block"})}function y(a=!0){document.querySelectorAll(".dot").forEach(c=>{let b;var d=()=>{b=setTimeout(()=>t(c.textContent,!0),1E3)};const e=()=>{clearTimeout(b);t(c.textContent,!1)};if(a)m.has(c)||(c.addEventListener("mouseover",
d),c.addEventListener("mouseout",e),m.set(c,{delayedHandler:d,cleardotTimer:e}));else if(d=m.get(c))c.removeEventListener("mouseover",d.delayedHandler),c.removeEventListener("mouseout",d.cleardotTimer),m.delete(c)})}function t(a,c){if(!document.getElementById("highlight-dot-style")){var b=document.createElement("style");b.id="highlight-dot-style";b.textContent="\n      @keyframes pulseDot {\n        0% { transform: scale(1); box-shadow: none; }\n        50% { transform: scale(1.5); box-shadow: 0 0 10px rgba(255, 165, 0, 0.6); }\n        100% { transform: scale(1); box-shadow: none; }\n      }\n\n      .highlight-dot {\n        animation: pulseDot 2s ease;\n      }\n\n      .price-moves-container {\n        transition: opacity 0.5s ease;\n      }\n    ";
document.head.appendChild(b)}const d=document.querySelector(".price-moves-container");b=document.querySelectorAll(".evt-dot");const e=g(a.charAt(0)||""),f=g(a.charAt(1)||"");c?d.style.zIndex="999":setTimeout(()=>{d.style.zIndex="1"},500);b.forEach(a=>{const b=g(a.getAttribute("data-ticker").charAt(0)||""),d=g(a.getAttribute("data-ticker").charAt(1)||"");e===b&&f===d?c?(a.style.display="block",a.classList.add("highlight-dot"),setTimeout(()=>{a.classList.remove("highlight-dot")},1500)):a.style.display=
"none":a.style.display=c?"none":"block"})}function z(){document.querySelectorAll(".dot").forEach(a=>{var c=g(a.textContent.charAt(0)||"");const b=g(a.textContent.charAt(1)||"");if(c=p(10*parseInt(c)+parseInt(b)))a.style.backgroundColor=c})}function A(){document.querySelectorAll(".dot").forEach(a=>{a.style.backgroundColor=a.dataset.savedBgClr})}let h=null;const x="#c62828 #e65100 #f9a825 #388e3c #1976d2 #512da8 #c2185b #00838f #7b1fa2".split(" ");let m=new Map,k="";window.PriceMoves={render:function(a,
c){u();const b=document.getElementById(c);if(b){b.innerHTML="";b.className="price-moves-container";b.style.zIndex=1;b.style.position="relative";var d=b.offsetHeight||100;c=document.createElement("div");c.className="center-line";b.appendChild(c);a=w(a);Object.entries(a).forEach(([a,c])=>{const e=document.createElement("div");e.className="date-column";var f=document.createElement("div");f.className="date-label";const [g,l,k]=a.split("-");a=new Date(g,l-1,k);5===a.getDay()&&e.classList.add("friday-column");
f.textContent=a.toLocaleDateString("en-US",{month:"short",day:"2-digit"});e.appendChild(f);f=c.filter(a=>0<a.change);c=c.filter(a=>0>a.change);const h=["10%","30%","50%","70%","80%"];f.forEach((a,b)=>{a=q(a,d);a.style.left=h[b%5];e.appendChild(a)});c.forEach((a,b)=>{a=q(a,d);a.style.left=h[b%5];e.appendChild(a)});b.appendChild(e)});setTimeout(()=>{b.scrollLeft=b.scrollWidth-b.clientWidth},0);var e=null,f=null;b.style.transition="box-shadow 0.2s ease, z-index 0.2s ease";b.addEventListener("mouseenter",
()=>{clearTimeout(f);e=setTimeout(()=>{b.style.zIndex="999";b.style.boxShadow="0 8px 16px rgba(0,0,0,0.35)"},300)});b.addEventListener("mouseleave",()=>{clearTimeout(e);f=setTimeout(()=>{b.style.zIndex="1";b.style.boxShadow="none"},600)});setTimeout(()=>{y(!0)},2500)}},toggle:function(a){const c=document.getElementById(a);if(c){document.getElementById("accordion-toggle-style")||(a=document.createElement("style"),a.id="accordion-toggle-style",a.textContent="\n      .accordion-wrapper {\n        position: relative;\n        transition: transform 0.4s ease, opacity 0.4s ease;\n      }\n      .accordion-collapsed {\n        transform: translateX(-100%);\n        opacity: 0;\n        pointer-events: none;\n      }\n      .accordion-expand-btn {\n        position: fixed;\n        left: 0;\n        transform: translateY(-50%);\n        background: #eee;\n        border: 1px solid #ccc;\n        border-left: none;\n        border-radius: 0 4px 4px 0;\n        padding: 3px 5px;\n        cursor: pointer;\n        font-size: 16px;\n        z-index: 1000;\n        display: none;\n      }\n      .accordion-collapse-btn {\n        position: absolute;\n        top: 50%;\n        right: 12.5%;\n        transform: translateY(-50%);\n        background: #eee;\n        border: 1px solid #ccc;\n        border-right: none;\n        border-radius: 4px 0 0 4px;\n        padding: 3px 5px;\n        cursor: pointer;\n        font-size: 16px;\n        z-index: 10;\n      }\n\t  .accordion-color-toggle {\n\t\tposition: absolute;\n        top:10%;\n        right: 13%;\n        transform: translateY(-50%);\n\t    z-index: 999;\n\t    display: flex;\n\t    align-items: center;\n\t    gap: 8px;\n\t    font-size: 14px;\n\t    font-family: sans-serif;\n\t    cursor: pointer;\n\t    user-select: none;\n\t  }\n\n\t  .toggle-switch {\n\t    position: relative;\n\t    width: 20px;\n\t    height: 10px;\n\t    background: #ccc;\n\t    border-radius: 5px;\n\t    transition: background 0.3s ease;\n\t  }\n\n\t  .toggle-switch::before {\n\t    content: '';\n\t    position: absolute;\n\t    top: 1px;\n\t    left: 1px;\n\t    width: 8px;\n\t    height: 8px;\n\t    background: #fff;\n\t    border-radius: 50%;\n\t    transition: transform 0.3s ease;\n\t  }\n\n\t  .toggle-switch.active {\n\t    background: #4caf50;\n\t  }\n\n\t  .toggle-switch.active::before {\n\t    transform: translateX(10px);\n\t  }\n\n\n    ",
document.head.appendChild(a));c.classList.add("accordion-wrapper");var b=document.createElement("button");b.className="accordion-collapse-btn";b.textContent="\x3c";var d=document.createElement("button");d.className="accordion-expand-btn";d.textContent="\x3e";d.style.display="none";b.onclick=()=>{var a=c.getBoundingClientRect();a=a.top+a.height/2;c.classList.add("accordion-collapsed");b.style.display="none";d.style.display="block";d.style.top=`${a}px`};d.onclick=()=>{c.classList.remove("accordion-collapsed");
d.style.display="none";b.style.display="block"};a=document.createElement("div");a.className="accordion-color-toggle";var e=document.createElement("span");e.textContent="Use Event Color";e.style.color="#888";e.style.fontSize="11px";var f=document.createElement("div");f.className="toggle-switch";a.appendChild(e);a.appendChild(f);c.appendChild(a);f.onclick=a=>{a.stopPropagation();""==k&&(k="uniform");k="event"===k?"uniform":"event";f.classList.toggle("active","event"===k);"event"===k?z():A()};c.appendChild(b);
document.body.appendChild(d)}}}})();